/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => DlvPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var import_child_process = require("child_process");
var import_util = require("util");
var import_state = require("@codemirror/state");
var import_view = require("@codemirror/view");
var path = __toESM(require("path"));
var import_fs = require("fs");
var os = __toESM(require("os"));
var execAsync = (0, import_util.promisify)(import_child_process.exec);
var DEFAULT_SETTINGS = {
  dlvLocationType: "relative",
  absolutePath: "",
  relativeExecutable: "executables/dlv.exe",
  availableExecutables: [],
  customExtensions: "asp",
  showErrors: false,
  showAllModels: false,
  hideFacts: false,
  cacheResults: true
};
var CodeBlockWidget = class extends import_view.WidgetType {
  constructor(plugin, lang, start, end, docText) {
    super();
    this.plugin = plugin;
    this.lang = lang;
    this.start = start;
    this.end = end;
    this.docText = docText;
  }
  toDOM() {
    const { header, outputPre, copyBtn } = this.plugin.createCodeBlockUI(this.lang);
    const runBtn = header.querySelector(".run-btn");
    const saveBtn = header.querySelector(".save-btn");
    runBtn.onclick = async () => {
      runBtn.disabled = true;
      try {
        const codeContent = this.docText.slice(this.start, this.end).trim();
        const result = await this.plugin.executeDlv(codeContent, this.lang);
        this.plugin.updateOutputUI(outputPre, copyBtn, result);
      } finally {
        runBtn.disabled = false;
      }
    };
    saveBtn.onclick = async () => {
      saveBtn.disabled = true;
      try {
        const codeContent = this.docText.slice(this.start, this.end).trim();
        const result = await this.plugin.executeDlv(codeContent, this.lang);
        await this.plugin.saveExecutionResult(result);
      } finally {
        saveBtn.disabled = false;
      }
    };
    copyBtn.onclick = () => this.plugin.copyToClipboard(outputPre.textContent || "");
    const container = document.createElement("div");
    container.className = "dlv-codeblock";
    container.append(header, outputPre);
    return container;
  }
  eq(other) {
    return this.start === other.start && this.end === other.end && this.lang === other.lang;
  }
};
var DlvPlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.initializePluginPath();
    await this.loadSettings();
    this.addStyle();
    this.registerEditorExtension(this.getEditorDecoration());
    this.registerMarkdownPostProcessor(this.markdownPostProcessor.bind(this));
    this.addSettingTab(new DlvSettingTab(this.app, this));
    this.registerFileHeaderButtons();
  }
  registerFileHeaderButtons() {
    this.registerEvent(this.app.workspace.on("file-open", (file) => {
      if (file instanceof import_obsidian.TFile && this.isSupportedExtension(file.extension)) {
        this.addRunButtonToHeader(file);
      }
    }));
  }
  addStyle() {
    this.stylesEl = document.createElement("style");
    this.stylesEl.textContent = `
            .dlv-codeblock {
                border: 1px solid var(--background-modifier-border);
                border-radius: 4px;
                margin: 1rem 0;
                padding: 0.5rem;
            }
            .dlv-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 0.5rem;
                margin-top: 0.5rem;
            }
            .dlv-output {
                white-space: pre-wrap;
                word-break: break-word;
                padding: 0.5rem;
                background: var(--background-primary);
                border: 1px solid var(--background-modifier-border);
                position: relative;
            }
            .dlv-error {
				background: var(--background-secondary);
				padding: 0.5rem;
				border-radius: 4px;
				margin-top: 0.5rem;
				border-left: 3px solid #ff5555;
			}
			
			.error-icon {
				margin-right: 0.5rem;
				color: #ff5555;
			}
			
			.error-content {
				display: inline-block;
				vertical-align: middle;
			}
			
			.error-line {
				margin: 0.25rem 0;
				font-family: var(--font-monospace);
				font-size: 0.9em;
			}
            .dlv-buttons {
                display: flex;
                gap: 0.5rem;
            }
			.dlv-run-container {
				gap: 4px;
				margin-right: 12px;
			}
			.dlv-run-button {
				color: var(--text-normal) !important;
				transition: background-color 0.15s ease;
			}
			.dlv-run-button:hover {
				background-color: var(--background-modifier-hover) !important;
			}
			.dlv-run-button svg {
				flex-shrink: 0;
			}
			.dlv-button-text {
				font-size: 0.85em;
				position: relative;
				bottom: 0.076rem;
			}
			@media (max-width: 400px) {
				.dlv-button-text {
					display: none;
				}
			}
			.dlv-tooltip {
				color: var(--text-muted);
				font-size: 0.85em;
			}
        `;
    document.head.appendChild(this.stylesEl);
  }
  createCodeBlockUI(lang) {
    const header = document.createElement("div");
    header.className = "dlv-header";
    const langLabel = document.createElement("span");
    langLabel.textContent = lang.toUpperCase();
    const buttons = document.createElement("div");
    buttons.className = "dlv-buttons";
    const runBtn = this.createButton("\u25B6 Run", "run-btn");
    const saveBtn = this.createButton("\u{1F4BE} Save", "save-btn");
    const copyBtn = this.createButton("\u{1F4CB} Copy", "copy-btn");
    buttons.append(runBtn, saveBtn);
    header.append(langLabel, buttons);
    const outputPre = document.createElement("pre");
    outputPre.className = "dlv-output";
    outputPre.style.display = "none";
    return { header, outputPre, copyBtn };
  }
  createButton(text, className) {
    const btn = document.createElement("button");
    btn.className = className;
    btn.textContent = text;
    return btn;
  }
  async executeDlv(content, lang) {
    try {
      const dlvPath = this.getDlvPath();
      await import_fs.promises.access(dlvPath);
      const tmpDir = os.tmpdir();
      await import_fs.promises.mkdir(tmpDir, { recursive: true });
      const tmpFile = path.join(tmpDir, `dlv-temp-${Date.now()}.${lang}`);
      await import_fs.promises.writeFile(tmpFile, content, "utf8");
      const args = [tmpFile];
      if (this.settings.showAllModels)
        args.push("-n", "0");
      if (this.settings.hideFacts)
        args.push("--no-facts");
      const { stdout, stderr } = await execAsync(
        `"${dlvPath}" ${args.map((arg) => `"${arg}"`).join(" ")}`,
        {
          shell: process.platform === "win32" ? "cmd.exe" : void 0,
          windowsHide: true,
          encoding: "utf-8"
        }
      );
      await import_fs.promises.unlink(tmpFile).catch(() => {
      });
      return {
        stdout: this.cleanOutput(stdout),
        stderr: this.cleanErrors(stderr)
      };
    } catch (error) {
      let errorMessage = "Errore sconosciuto";
      if (error instanceof Error) {
        errorMessage = error.message;
        console.error("Errore executeDlv:", error);
      }
      return {
        stdout: "",
        stderr: errorMessage
      };
    }
  }
  cleanOutput(output) {
    return output.replace(/^DLV \d+\.\d+\.\d+\s*\n/, "").replace(/Generic warning: .*\n?/g, "").trim();
  }
  cleanErrors(errorOutput) {
    const lines = errorOutput.split("\n").map((line) => {
      line = line.replace(/([A-Za-z]:\\[^\s]+|\/[^\s]+)/g, "").replace(/(dlv-temp-\d+\.asp)/gi, "Input");
      const errorMatch = line.match(/(line \d+):\s*(.*)/i);
      if (errorMatch) {
        return `${errorMatch[1]}: ${errorMatch[2].replace(/^.*?:\s*/, "")}`;
      }
      return line.includes("Command failed:") || line.includes("Aborting due to") ? "" : line;
    }).filter((line) => line.trim().length > 0);
    return lines.join("\n").replace(/(line \d+):/gi, "Errore:\n$1").replace(/[.:]+$/, "").trim();
  }
  formatErrorMessages(errorString) {
    return errorString.split("\n").map((line) => {
      const match = line.match(/Linea (\d+):\s*(.*)/i);
      if (match) {
        return `<div class="error-line">
                    <span class="error-line-number">Linea ${match[1]}:</span>
                    <span class="error-message">${match[2]}</span>
                </div>`;
      }
      return line ? `<div class="error-general">${line}</div>` : "";
    }).join("");
  }
  updateOutputUI(outputEl, copyBtn, result) {
    const hasOutput = result.stdout.trim().length > 0;
    const hasErrors = result.stderr.trim().length > 0;
    outputEl.innerHTML = result.stdout.replace(/\n/g, "<br>");
    outputEl.style.display = "block";
    if ((this.settings.showErrors || !hasOutput) && hasErrors) {
      const errorContent = this.cleanErrors(result.stderr).split("\n").map((line) => {
        const parts = line.split(":");
        return `<div class="error-line">
                    <b>${parts[0]}:</b> 
                    ${parts.slice(1).join(":")}
                </div>`;
      }).join("");
      const errorEl = document.createElement("div");
      errorEl.className = "dlv-error";
      errorEl.innerHTML = `<pre>${errorContent}</pre>`;
      outputEl.appendChild(errorEl);
    }
    copyBtn.style.display = "block";
  }
  async saveExecutionResult(result) {
    const timestamp = new Date().toLocaleString();
    let content = `% ${timestamp}
`;
    if (result.stdout) {
      content += "% AnswerSet\n" + result.stdout.split("\n").map((line) => `% ${line}`).join("\n");
    }
    if (this.settings.showErrors && result.stderr) {
      content += "\n% Errore\n" + result.stderr.split("\n").map((line) => `% ${line}`).join("\n");
    }
    const file = this.app.workspace.getActiveFile();
    if (file) {
      await this.app.vault.append(file, `

${content.trim()}`);
      new import_obsidian.Notice("Risultato salvato nel file!");
    }
  }
  copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => new import_obsidian.Notice("Copied to clipboard"));
  }
  addRunButtonToHeader(file) {
    const titleBar = this.app.workspace.getLeaf().view.containerEl.querySelector(".view-header");
    if (!titleBar)
      return;
    const actionsContainer = titleBar.querySelector(".view-actions") || titleBar.querySelector(".titlebar-button-container");
    if (!actionsContainer)
      return;
    actionsContainer.querySelectorAll(".dlv-run-button").forEach((btn) => btn.remove());
    const runBtn = document.createElement("div");
    runBtn.className = "clickable-icon dlv-run-button";
    runBtn.innerHTML = `
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" 
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="5 3 19 12 5 21 5 3"/>
        </svg>
        <span class="dlv-button-text">Run</span>
    `;
    runBtn.style.cssText = `
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 4px 8px;
        margin: 0 2px;
        border-radius: 4px;
        position: relative;
        top: -1px;
    `;
    runBtn.addEventListener("mouseenter", () => {
      runBtn.style.backgroundColor = "var(--background-modifier-hover)";
    });
    runBtn.addEventListener("mouseleave", () => {
      runBtn.style.backgroundColor = "transparent";
    });
    runBtn.onclick = async () => {
      try {
        const content = await this.app.vault.read(file);
        const result = await this.executeDlv(content, file.extension);
        await this.saveExecutionResult(result);
      } catch (error) {
        new import_obsidian.Notice(`Errore: ${error instanceof Error ? error.message : "Errore sconosciuto"}`);
      }
    };
    actionsContainer.insertBefore(runBtn, actionsContainer.firstChild);
  }
  markdownPostProcessor(element, ctx) {
    element.querySelectorAll("pre code").forEach((codeEl) => {
      var _a;
      const el = codeEl;
      const lang = this.getCodeBlockLanguage(el);
      if (!lang || !this.isSupportedLanguage(lang))
        return;
      const { header, outputPre, copyBtn } = this.createCodeBlockUI(lang);
      const runBtn = header.querySelector(".run-btn");
      const saveBtn = header.querySelector(".save-btn");
      const wrapper = document.createElement("div");
      wrapper.className = "dlv-codeblock";
      wrapper.append(
        header,
        el.parentElement.cloneNode(true),
        outputPre
      );
      runBtn.onclick = async () => {
        const result = await this.executeDlv(el.textContent || "", lang);
        this.updateOutputUI(outputPre, copyBtn, result);
      };
      saveBtn.onclick = async () => {
        const result = await this.executeDlv(el.textContent || "", lang);
        await this.saveExecutionResult(result);
      };
      copyBtn.onclick = () => this.copyToClipboard(outputPre.textContent || "");
      (_a = el.parentElement) == null ? void 0 : _a.replaceWith(wrapper);
    });
  }
  getCodeBlockLanguage(element) {
    const langClass = Array.from(element.classList).find((c) => c.startsWith("language-"));
    return langClass == null ? void 0 : langClass.replace("language-", "");
  }
  isSupportedLanguage(lang) {
    return this.settings.customExtensions.split(",").map((e) => e.trim().toLowerCase()).some((e) => lang.toLowerCase() === e || lang.toLowerCase().startsWith(e + "."));
  }
  isSupportedExtension(ext) {
    return this.isSupportedLanguage(ext);
  }
  getEditorDecoration() {
    return import_view.EditorView.decorations.compute(["doc"], (state) => {
      const builder = new import_state.RangeSetBuilder();
      const text = state.doc.toString();
      const regex = /```(\S+)\n([\s\S]*?)```/g;
      let match;
      while ((match = regex.exec(text)) !== null) {
        const lang = match[1].toLowerCase();
        if (this.isSupportedLanguage(lang)) {
          const start = match.index + match[0].indexOf(match[2]);
          const end = start + match[2].length;
          builder.add(end, end, import_view.Decoration.widget({
            widget: new CodeBlockWidget(this, lang, start, end, text),
            side: 1
          }));
        }
      }
      return builder.finish();
    });
  }
  async initializePluginPath() {
    try {
      const vaultPath = this.app.vault.adapter.basePath;
      if (this.manifest.dir != null) {
        this.pluginPath = path.join(
          vaultPath,
          this.manifest.dir
        );
      }
      console.log("Percorso corretto del plugin:", this.pluginPath);
      await import_fs.promises.mkdir(this.pluginPath, { recursive: true });
    } catch (error) {
      console.error("Errore inizializzazione plugin:", error);
      throw new Error("Configurazione plugin non valida");
    }
  }
  async refreshExecutablesList() {
    if (this.settings.dlvLocationType === "relative") {
      const executablesPath = path.join(this.pluginPath, "executables");
      console.log("Percorso eseguibili:", executablesPath);
      try {
        const files = await import_fs.promises.readdir(executablesPath);
        this.settings.availableExecutables = files.filter((f) => f.toLowerCase().includes("dlv")).map((f) => path.join("executables", f));
        console.log("Eseguibili trovati:", this.settings.availableExecutables);
      } catch (error) {
        console.error("Errore scansione eseguibili:", error);
      }
    }
  }
  isValidExecutable(filename) {
    if (process.platform === "win32") {
      return filename.toLowerCase().endsWith(".exe");
    }
    return /^dlv[-_]?(linux|mac|.*)/i.test(filename);
  }
  getDlvPath() {
    if (this.settings.dlvLocationType === "absolute") {
      return this.settings.absolutePath;
    }
    return path.join(
      this.pluginPath,
      this.settings.relativeExecutable
    );
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
    await this.refreshExecutablesList();
  }
  async saveSettings() {
    if (this.settings.dlvLocationType === "relative") {
      const fullPath = path.join(this.pluginPath, this.settings.relativeExecutable);
      if (!await import_fs.promises.access(fullPath).then(() => true).catch(() => false)) {
        new import_obsidian.Notice("\u26A0\uFE0F Eseguibile non trovato nel percorso relativo!");
        return;
      }
    } else {
      if (!await import_fs.promises.access(this.settings.absolutePath).then(() => true).catch(() => false)) {
        new import_obsidian.Notice("\u26A0\uFE0F Percorso assoluto non valido!");
        return;
      }
    }
    await this.saveData(this.settings);
  }
  onunload() {
    var _a;
    (_a = this.stylesEl) == null ? void 0 : _a.remove();
  }
};
var DlvSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "DLV Plugin Settings" });
    new import_obsidian.Setting(containerEl).setName("Installation Type").setDesc("Select DLV executable location type").addDropdown((dropdown) => {
      this.typeDropdown = dropdown.addOption("absolute", "Absolute Path").addOption("relative", "Relative to Plugin").setValue(this.plugin.settings.dlvLocationType).onChange(async (value) => {
        this.plugin.settings.dlvLocationType = value;
        await this.plugin.refreshExecutablesList();
        this.updateSettingsVisibility();
        await this.plugin.saveSettings();
      });
    });
    this.absoluteSetting = new import_obsidian.Setting(containerEl).setName("Absolute Path").setDesc("Full path to DLV executable (e.g. C:/dlv/dlv.exe)").addText((text) => text.setValue(this.plugin.settings.absolutePath).onChange(async (value) => {
      this.plugin.settings.absolutePath = value;
      await this.plugin.saveSettings();
    }));
    this.relativeSetting = new import_obsidian.Setting(containerEl).setName("Plugin Executable").setDesc("Select executable from plugin folder").addDropdown((dropdown) => {
      this.plugin.settings.availableExecutables.forEach((exe) => {
        dropdown.addOption(exe, exe.split("/").pop() || exe);
      });
      dropdown.setValue(this.plugin.settings.relativeExecutable).onChange(async (value) => {
        this.plugin.settings.relativeExecutable = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Supported File Extensions").setDesc("Comma-separated list (e.g. asp,dlv,prolog)").addText((text) => text.setValue(this.plugin.settings.customExtensions).onChange(async (value) => {
      this.plugin.settings.customExtensions = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Show All Models").setDesc("Enable -n 0 flag to show all answer sets").addToggle((toggle) => toggle.setValue(this.plugin.settings.showAllModels).onChange(async (value) => {
      this.plugin.settings.showAllModels = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Hide Facts").setDesc("Enable --no-facts flag to hide facts").addToggle((toggle) => toggle.setValue(this.plugin.settings.hideFacts).onChange(async (value) => {
      this.plugin.settings.hideFacts = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Error Handling").setDesc("Show error messages in output").addToggle((toggle) => toggle.setValue(this.plugin.settings.showErrors).onChange(async (value) => {
      this.plugin.settings.showErrors = value;
      await this.plugin.saveSettings();
    }));
    this.updateSettingsVisibility();
  }
  updateSettingsVisibility() {
    const isAbsolute = this.plugin.settings.dlvLocationType === "absolute";
    this.absoluteSetting.settingEl.style.display = isAbsolute ? "" : "none";
    this.relativeSetting.settingEl.style.display = isAbsolute ? "none" : "";
    const dropdown = this.relativeSetting.controlEl.querySelector("select");
    if (dropdown) {
      dropdown.innerHTML = this.plugin.settings.availableExecutables.map((exe) => `<option value="${exe}">${path.basename(exe)}</option>`).join("");
    }
    const basePath = path.join(this.plugin.pluginPath, "executables");
    const fileList = this.plugin.settings.availableExecutables.map((exe) => `\u2022 ${path.basename(exe)}`).join("\n");
    this.relativeSetting.descEl.innerHTML = `
            Percorso scannerizzato: <code>${basePath}</code><br>
            File trovati: ${this.plugin.settings.availableExecutables.length}
            <pre style="margin-top:5px">${fileList || "Nessun file valido trovato"}</pre>
        `;
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtcclxuXHRBcHAsXHJcblx0UGx1Z2luLFxyXG5cdFBsdWdpblNldHRpbmdUYWIsXHJcblx0U2V0dGluZyxcclxuXHROb3RpY2UsXHJcblx0TWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCxcclxuXHRURmlsZSwgRHJvcGRvd25Db21wb25lbnRcclxuXHJcbn0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IGV4ZWMgfSBmcm9tIFwiY2hpbGRfcHJvY2Vzc1wiO1xyXG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tIFwidXRpbFwiO1xyXG5pbXBvcnQgeyBSYW5nZVNldEJ1aWxkZXIgfSBmcm9tIFwiQGNvZGVtaXJyb3Ivc3RhdGVcIjtcclxuaW1wb3J0IHtEZWNvcmF0aW9uLCBFZGl0b3JWaWV3LCBXaWRnZXRUeXBlfSBmcm9tIFwiQGNvZGVtaXJyb3Ivdmlld1wiO1xyXG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gXCJwYXRoXCI7XHJcbmltcG9ydCB7IHByb21pc2VzIGFzIGZzIH0gZnJvbSBcImZzXCI7XHJcbmltcG9ydCAqIGFzIG9zIGZyb20gXCJvc1wiO1xyXG5cclxuY29uc3QgZXhlY0FzeW5jID0gcHJvbWlzaWZ5KGV4ZWMpO1xyXG5cclxuaW50ZXJmYWNlIERsdlBsdWdpblNldHRpbmdzIHtcclxuXHRkbHZMb2NhdGlvblR5cGU6IFwiYWJzb2x1dGVcIiB8IFwicmVsYXRpdmVcIjtcclxuXHRhYnNvbHV0ZVBhdGg6IHN0cmluZztcclxuXHRyZWxhdGl2ZUV4ZWN1dGFibGU6IHN0cmluZztcclxuXHRhdmFpbGFibGVFeGVjdXRhYmxlczogc3RyaW5nW107XHJcblx0Y3VzdG9tRXh0ZW5zaW9uczogc3RyaW5nO1xyXG5cdHNob3dFcnJvcnM6IGJvb2xlYW47XHJcblx0c2hvd0FsbE1vZGVsczogYm9vbGVhbjtcclxuXHRoaWRlRmFjdHM6IGJvb2xlYW47XHJcblx0Y2FjaGVSZXN1bHRzOiBib29sZWFuO1xyXG59XHJcblxyXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBEbHZQbHVnaW5TZXR0aW5ncyA9IHtcclxuXHRkbHZMb2NhdGlvblR5cGU6IFwicmVsYXRpdmVcIixcclxuXHRhYnNvbHV0ZVBhdGg6IFwiXCIsXHJcblx0cmVsYXRpdmVFeGVjdXRhYmxlOiBcImV4ZWN1dGFibGVzL2Rsdi5leGVcIixcclxuXHRhdmFpbGFibGVFeGVjdXRhYmxlczogW10sXHJcblx0Y3VzdG9tRXh0ZW5zaW9uczogXCJhc3BcIixcclxuXHRzaG93RXJyb3JzOiBmYWxzZSxcclxuXHRzaG93QWxsTW9kZWxzOiBmYWxzZSxcclxuXHRoaWRlRmFjdHM6IGZhbHNlLFxyXG5cdGNhY2hlUmVzdWx0czogdHJ1ZSxcclxufTtcclxuXHJcbmNsYXNzIENvZGVCbG9ja1dpZGdldCBleHRlbmRzIFdpZGdldFR5cGUge1xyXG5cdGNvbnN0cnVjdG9yKFxyXG5cdFx0cHJpdmF0ZSBwbHVnaW46IERsdlBsdWdpbixcclxuXHRcdHByaXZhdGUgbGFuZzogc3RyaW5nLFxyXG5cdFx0cHJpdmF0ZSBzdGFydDogbnVtYmVyLFxyXG5cdFx0cHJpdmF0ZSBlbmQ6IG51bWJlcixcclxuXHRcdHByaXZhdGUgZG9jVGV4dDogc3RyaW5nXHJcblx0KSB7IHN1cGVyKCk7IH1cclxuXHJcblx0dG9ET00oKSB7XHJcblx0XHRjb25zdCB7IGhlYWRlciwgb3V0cHV0UHJlLCBjb3B5QnRuIH0gPSB0aGlzLnBsdWdpbi5jcmVhdGVDb2RlQmxvY2tVSSh0aGlzLmxhbmcpO1xyXG5cdFx0Y29uc3QgcnVuQnRuID0gaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5ydW4tYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblx0XHRjb25zdCBzYXZlQnRuID0gaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5zYXZlLWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuXHRcdHJ1bkJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRydW5CdG4uZGlzYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGNvbnN0IGNvZGVDb250ZW50ID0gdGhpcy5kb2NUZXh0LnNsaWNlKHRoaXMuc3RhcnQsIHRoaXMuZW5kKS50cmltKCk7XHJcblx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wbHVnaW4uZXhlY3V0ZURsdihjb2RlQ29udGVudCwgdGhpcy5sYW5nKTtcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi51cGRhdGVPdXRwdXRVSShvdXRwdXRQcmUsIGNvcHlCdG4sIHJlc3VsdCk7XHJcblx0XHRcdH0gZmluYWxseSB7XHJcblx0XHRcdFx0cnVuQnRuLmRpc2FibGVkID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRzYXZlQnRuLmRpc2FibGVkID0gdHJ1ZTtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRjb25zdCBjb2RlQ29udGVudCA9IHRoaXMuZG9jVGV4dC5zbGljZSh0aGlzLnN0YXJ0LCB0aGlzLmVuZCkudHJpbSgpO1xyXG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucGx1Z2luLmV4ZWN1dGVEbHYoY29kZUNvbnRlbnQsIHRoaXMubGFuZyk7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZUV4ZWN1dGlvblJlc3VsdChyZXN1bHQpO1xyXG5cdFx0XHR9IGZpbmFsbHkge1xyXG5cdFx0XHRcdHNhdmVCdG4uZGlzYWJsZWQgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHRjb3B5QnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5jb3B5VG9DbGlwYm9hcmQob3V0cHV0UHJlLnRleHRDb250ZW50IHx8IFwiXCIpO1xyXG5cclxuXHRcdGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblx0XHRjb250YWluZXIuY2xhc3NOYW1lID0gXCJkbHYtY29kZWJsb2NrXCI7XHJcblx0XHRjb250YWluZXIuYXBwZW5kKGhlYWRlciwgb3V0cHV0UHJlKTtcclxuXHRcdHJldHVybiBjb250YWluZXI7XHJcblx0fVxyXG5cclxuXHRlcShvdGhlcjogQ29kZUJsb2NrV2lkZ2V0KSB7XHJcblx0XHRyZXR1cm4gdGhpcy5zdGFydCA9PT0gb3RoZXIuc3RhcnQgJiYgdGhpcy5lbmQgPT09IG90aGVyLmVuZCAmJiB0aGlzLmxhbmcgPT09IG90aGVyLmxhbmc7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEbHZQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdHNldHRpbmdzOiBEbHZQbHVnaW5TZXR0aW5ncztcclxuXHRwcml2YXRlIHN0eWxlc0VsOiBIVE1MU3R5bGVFbGVtZW50O1xyXG5cdHBsdWdpblBhdGg6IHN0cmluZztcclxuXHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5pbml0aWFsaXplUGx1Z2luUGF0aCgpO1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHRcdHRoaXMuYWRkU3R5bGUoKTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFZGl0b3JFeHRlbnNpb24odGhpcy5nZXRFZGl0b3JEZWNvcmF0aW9uKCkpO1xyXG5cdFx0dGhpcy5yZWdpc3Rlck1hcmtkb3duUG9zdFByb2Nlc3Nvcih0aGlzLm1hcmtkb3duUG9zdFByb2Nlc3Nvci5iaW5kKHRoaXMpKTtcclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgRGx2U2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cdFx0dGhpcy5yZWdpc3RlckZpbGVIZWFkZXJCdXR0b25zKCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlZ2lzdGVyRmlsZUhlYWRlckJ1dHRvbnMoKSB7XHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKFwiZmlsZS1vcGVuXCIsIChmaWxlKSA9PiB7XHJcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgdGhpcy5pc1N1cHBvcnRlZEV4dGVuc2lvbihmaWxlLmV4dGVuc2lvbikpIHtcclxuXHRcdFx0XHR0aGlzLmFkZFJ1bkJ1dHRvblRvSGVhZGVyKGZpbGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9KSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFkZFN0eWxlKCkge1xyXG5cdFx0dGhpcy5zdHlsZXNFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XHJcblx0XHR0aGlzLnN0eWxlc0VsLnRleHRDb250ZW50ID0gYFxyXG4gICAgICAgICAgICAuZGx2LWNvZGVibG9jayB7XHJcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XHJcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICAgICAgICAgICAgICBtYXJnaW46IDFyZW0gMDtcclxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAuZGx2LWhlYWRlciB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDAuNXJlbTtcclxuICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDAuNXJlbTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAuZGx2LW91dHB1dCB7XHJcbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XHJcbiAgICAgICAgICAgICAgICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC41cmVtO1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcclxuICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAuZGx2LWVycm9yIHtcclxuXHRcdFx0XHRiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XHJcblx0XHRcdFx0cGFkZGluZzogMC41cmVtO1xyXG5cdFx0XHRcdGJvcmRlci1yYWRpdXM6IDRweDtcclxuXHRcdFx0XHRtYXJnaW4tdG9wOiAwLjVyZW07XHJcblx0XHRcdFx0Ym9yZGVyLWxlZnQ6IDNweCBzb2xpZCAjZmY1NTU1O1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQuZXJyb3ItaWNvbiB7XHJcblx0XHRcdFx0bWFyZ2luLXJpZ2h0OiAwLjVyZW07XHJcblx0XHRcdFx0Y29sb3I6ICNmZjU1NTU7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC5lcnJvci1jb250ZW50IHtcclxuXHRcdFx0XHRkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcblx0XHRcdFx0dmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0LmVycm9yLWxpbmUge1xyXG5cdFx0XHRcdG1hcmdpbjogMC4yNXJlbSAwO1xyXG5cdFx0XHRcdGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LW1vbm9zcGFjZSk7XHJcblx0XHRcdFx0Zm9udC1zaXplOiAwLjllbTtcclxuXHRcdFx0fVxyXG4gICAgICAgICAgICAuZGx2LWJ1dHRvbnMge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgICAgIGdhcDogMC41cmVtO1xyXG4gICAgICAgICAgICB9XHJcblx0XHRcdC5kbHYtcnVuLWNvbnRhaW5lciB7XHJcblx0XHRcdFx0Z2FwOiA0cHg7XHJcblx0XHRcdFx0bWFyZ2luLXJpZ2h0OiAxMnB4O1xyXG5cdFx0XHR9XHJcblx0XHRcdC5kbHYtcnVuLWJ1dHRvbiB7XHJcblx0XHRcdFx0Y29sb3I6IHZhcigtLXRleHQtbm9ybWFsKSAhaW1wb3J0YW50O1xyXG5cdFx0XHRcdHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4xNXMgZWFzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHQuZGx2LXJ1bi1idXR0b246aG92ZXIge1xyXG5cdFx0XHRcdGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpICFpbXBvcnRhbnQ7XHJcblx0XHRcdH1cclxuXHRcdFx0LmRsdi1ydW4tYnV0dG9uIHN2ZyB7XHJcblx0XHRcdFx0ZmxleC1zaHJpbms6IDA7XHJcblx0XHRcdH1cclxuXHRcdFx0LmRsdi1idXR0b24tdGV4dCB7XHJcblx0XHRcdFx0Zm9udC1zaXplOiAwLjg1ZW07XHJcblx0XHRcdFx0cG9zaXRpb246IHJlbGF0aXZlO1xyXG5cdFx0XHRcdGJvdHRvbTogMC4wNzZyZW07XHJcblx0XHRcdH1cclxuXHRcdFx0QG1lZGlhIChtYXgtd2lkdGg6IDQwMHB4KSB7XHJcblx0XHRcdFx0LmRsdi1idXR0b24tdGV4dCB7XHJcblx0XHRcdFx0XHRkaXNwbGF5OiBub25lO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHQuZGx2LXRvb2x0aXAge1xyXG5cdFx0XHRcdGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcclxuXHRcdFx0XHRmb250LXNpemU6IDAuODVlbTtcclxuXHRcdFx0fVxyXG4gICAgICAgIGA7XHJcblx0XHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHRoaXMuc3R5bGVzRWwpO1xyXG5cdH1cclxuXHJcblx0Y3JlYXRlQ29kZUJsb2NrVUkobGFuZzogc3RyaW5nKSB7XHJcblx0XHRjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0aGVhZGVyLmNsYXNzTmFtZSA9IFwiZGx2LWhlYWRlclwiO1xyXG5cclxuXHRcdGNvbnN0IGxhbmdMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG5cdFx0bGFuZ0xhYmVsLnRleHRDb250ZW50ID0gbGFuZy50b1VwcGVyQ2FzZSgpO1xyXG5cclxuXHRcdGNvbnN0IGJ1dHRvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0YnV0dG9ucy5jbGFzc05hbWUgPSBcImRsdi1idXR0b25zXCI7XHJcblxyXG5cdFx0Y29uc3QgcnVuQnRuID0gdGhpcy5jcmVhdGVCdXR0b24oXCJcdTI1QjYgUnVuXCIsIFwicnVuLWJ0blwiKTtcclxuXHRcdGNvbnN0IHNhdmVCdG4gPSB0aGlzLmNyZWF0ZUJ1dHRvbihcIlx1RDgzRFx1RENCRSBTYXZlXCIsIFwic2F2ZS1idG5cIik7XHJcblx0XHRjb25zdCBjb3B5QnRuID0gdGhpcy5jcmVhdGVCdXR0b24oXCJcdUQ4M0RcdURDQ0IgQ29weVwiLCBcImNvcHktYnRuXCIpO1xyXG5cclxuXHRcdGJ1dHRvbnMuYXBwZW5kKHJ1bkJ0biwgc2F2ZUJ0bik7XHJcblx0XHRoZWFkZXIuYXBwZW5kKGxhbmdMYWJlbCwgYnV0dG9ucyk7XHJcblxyXG5cdFx0Y29uc3Qgb3V0cHV0UHJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInByZVwiKTtcclxuXHRcdG91dHB1dFByZS5jbGFzc05hbWUgPSBcImRsdi1vdXRwdXRcIjtcclxuXHRcdG91dHB1dFByZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblxyXG5cdFx0cmV0dXJuIHsgaGVhZGVyLCBvdXRwdXRQcmUsIGNvcHlCdG4gfTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgY3JlYXRlQnV0dG9uKHRleHQ6IHN0cmluZywgY2xhc3NOYW1lOiBzdHJpbmcpIHtcclxuXHRcdGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcblx0XHRidG4uY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG5cdFx0YnRuLnRleHRDb250ZW50ID0gdGV4dDtcclxuXHRcdHJldHVybiBidG47XHJcblx0fVxyXG5cclxuXHRhc3luYyBleGVjdXRlRGx2KGNvbnRlbnQ6IHN0cmluZywgbGFuZzogc3RyaW5nKTogUHJvbWlzZTx7IHN0ZG91dDogc3RyaW5nOyBzdGRlcnI6IHN0cmluZyB9PiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyAxLiBWZXJpZmljYSBlc2lzdGVuemEgZmlsZSBETFZcclxuXHRcdFx0Y29uc3QgZGx2UGF0aCA9IHRoaXMuZ2V0RGx2UGF0aCgpO1xyXG5cdFx0XHRhd2FpdCBmcy5hY2Nlc3MoZGx2UGF0aCk7IC8vIExhbmNpYSBlcnJvcmUgc2Ugbm9uIGVzaXN0ZVxyXG5cclxuXHRcdFx0Ly8gMi4gQ3JlYSBmaWxlIHRlbXBvcmFuZW9cclxuXHRcdFx0Y29uc3QgdG1wRGlyID0gb3MudG1wZGlyKCk7XHJcblx0XHRcdGF3YWl0IGZzLm1rZGlyKHRtcERpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7IC8vIENyZWEgbGEgY2FydGVsbGEgc2Ugbm9uIGVzaXN0ZVxyXG5cclxuXHRcdFx0Y29uc3QgdG1wRmlsZSA9IHBhdGguam9pbih0bXBEaXIsIGBkbHYtdGVtcC0ke0RhdGUubm93KCl9LiR7bGFuZ31gKTtcclxuXHRcdFx0YXdhaXQgZnMud3JpdGVGaWxlKHRtcEZpbGUsIGNvbnRlbnQsIFwidXRmOFwiKTsgLy8gU2NyaXZlIGlsIGNvZGljZSBpbiB1biBmaWxlIHRlbXBvcmFuZW9cclxuXHJcblx0XHRcdC8vIDMuIEVzZWd1aSBETFZcclxuXHRcdFx0Y29uc3QgYXJncyA9IFt0bXBGaWxlXTtcclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2hvd0FsbE1vZGVscykgYXJncy5wdXNoKFwiLW5cIiwgXCIwXCIpO1xyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5oaWRlRmFjdHMpIGFyZ3MucHVzaChcIi0tbm8tZmFjdHNcIik7XHJcblxyXG5cdFx0XHRjb25zdCB7IHN0ZG91dCwgc3RkZXJyIH0gPSBhd2FpdCBleGVjQXN5bmMoXHJcblx0XHRcdFx0YFwiJHtkbHZQYXRofVwiICR7YXJncy5tYXAoYXJnID0+IGBcIiR7YXJnfVwiYCkuam9pbihcIiBcIil9YCxcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRzaGVsbDogcHJvY2Vzcy5wbGF0Zm9ybSA9PT0gXCJ3aW4zMlwiID8gXCJjbWQuZXhlXCIgOiB1bmRlZmluZWQsXHJcblx0XHRcdFx0XHR3aW5kb3dzSGlkZTogdHJ1ZSxcclxuXHRcdFx0XHRcdGVuY29kaW5nOiAndXRmLTgnXHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdFx0Ly8gNC4gUHVsaXppYSBmaWxlIHRlbXBvcmFuZW9cclxuXHRcdFx0YXdhaXQgZnMudW5saW5rKHRtcEZpbGUpLmNhdGNoKCgpID0+IHt9KTsgLy8gRWxpbWluYSBpbCBmaWxlIHRlbXBvcmFuZW9cclxuXHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0c3Rkb3V0OiB0aGlzLmNsZWFuT3V0cHV0KHN0ZG91dCksXHJcblx0XHRcdFx0c3RkZXJyOiB0aGlzLmNsZWFuRXJyb3JzKHN0ZGVycilcclxuXHRcdFx0fTtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdC8vIEdlc3Rpb25lIGVycm9yaSBjZW50cmFsaXp6YXRhXHJcblx0XHRcdGxldCBlcnJvck1lc3NhZ2UgPSBcIkVycm9yZSBzY29ub3NjaXV0b1wiO1xyXG5cdFx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xyXG5cdFx0XHRcdGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yZSBleGVjdXRlRGx2OlwiLCBlcnJvcik7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0c3Rkb3V0OiBcIlwiLFxyXG5cdFx0XHRcdHN0ZGVycjogZXJyb3JNZXNzYWdlXHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGNsZWFuT3V0cHV0KG91dHB1dDogc3RyaW5nKSB7XHJcblx0XHRyZXR1cm4gb3V0cHV0XHJcblx0XHRcdC5yZXBsYWNlKC9eRExWIFxcZCtcXC5cXGQrXFwuXFxkK1xccypcXG4vLCBcIlwiKSAvLyBSaW11b3ZlIGxhIHJpZ2EgZGVsbGEgdmVyc2lvbmVcclxuXHRcdFx0LnJlcGxhY2UoL0dlbmVyaWMgd2FybmluZzogLipcXG4/L2csIFwiXCIpICAvLyBSaW11b3ZlIGkgd2FybmluZyBnZW5lcmljaVxyXG5cdFx0XHQudHJpbSgpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBjbGVhbkVycm9ycyhlcnJvck91dHB1dDogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdC8vIFNwbGl0IGluIGxpbmVlIGUgZmlsdHJhXHJcblx0XHRjb25zdCBsaW5lcyA9IGVycm9yT3V0cHV0LnNwbGl0KCdcXG4nKVxyXG5cdFx0XHQubWFwKGxpbmUgPT4ge1xyXG5cdFx0XHRcdC8vIDEuIFJpbXVvdmkgaW50ZXJpIHBlcmNvcnNpIGZpbGVcclxuXHRcdFx0XHRsaW5lID0gbGluZS5yZXBsYWNlKC8oW0EtWmEtel06XFxcXFteXFxzXSt8XFwvW15cXHNdKykvZywgJycpXHJcblx0XHRcdFx0XHQucmVwbGFjZSgvKGRsdi10ZW1wLVxcZCtcXC5hc3ApL2dpLCAnSW5wdXQnKTtcclxuXHJcblx0XHRcdFx0Ly8gMi4gRXN0cmFpIHNvbG8gbGEgcGFydGUgZG9wbyBcImxpbmUgWDpcIlxyXG5cdFx0XHRcdGNvbnN0IGVycm9yTWF0Y2ggPSBsaW5lLm1hdGNoKC8obGluZSBcXGQrKTpcXHMqKC4qKS9pKTtcclxuXHRcdFx0XHRpZiAoZXJyb3JNYXRjaCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGAke2Vycm9yTWF0Y2hbMV19OiAke2Vycm9yTWF0Y2hbMl0ucmVwbGFjZSgvXi4qPzpcXHMqLywgJycpfWA7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyAzLiBSaW11b3ZpIHJpZ2hlIG5vbiByaWxldmFudGlcclxuXHRcdFx0XHRyZXR1cm4gbGluZS5pbmNsdWRlcygnQ29tbWFuZCBmYWlsZWQ6JykgfHxcclxuXHRcdFx0XHRsaW5lLmluY2x1ZGVzKCdBYm9ydGluZyBkdWUgdG8nKSA/ICcnIDogbGluZTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmZpbHRlcihsaW5lID0+IGxpbmUudHJpbSgpLmxlbmd0aCA+IDApO1xyXG5cclxuXHRcdC8vIDQuIFVuaXNjaSBlIGZvcm1hdHRhXHJcblx0XHRyZXR1cm4gbGluZXMuam9pbignXFxuJylcclxuXHRcdFx0LnJlcGxhY2UoLyhsaW5lIFxcZCspOi9naSwgJ0Vycm9yZTpcXG4kMScpXHJcblx0XHRcdC5yZXBsYWNlKC9bLjpdKyQvLCAnJykgLy8gUmltdW92aSBwdW50aSBmaW5hbGlcclxuXHRcdFx0LnRyaW0oKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZm9ybWF0RXJyb3JNZXNzYWdlcyhlcnJvclN0cmluZzogc3RyaW5nKSB7XHJcblx0XHRyZXR1cm4gZXJyb3JTdHJpbmdcclxuXHRcdFx0LnNwbGl0KCdcXG4nKVxyXG5cdFx0XHQubWFwKGxpbmUgPT4ge1xyXG5cdFx0XHRcdC8vIEVzdHJhaSBudW1lcm8gbGluZWEgZSBtZXNzYWdnaW9cclxuXHRcdFx0XHRjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2goL0xpbmVhIChcXGQrKTpcXHMqKC4qKS9pKTtcclxuXHRcdFx0XHRpZiAobWF0Y2gpIHtcclxuXHRcdFx0XHRcdHJldHVybiBgPGRpdiBjbGFzcz1cImVycm9yLWxpbmVcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yLWxpbmUtbnVtYmVyXCI+TGluZWEgJHttYXRjaFsxXX06PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3ItbWVzc2FnZVwiPiR7bWF0Y2hbMl19PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+YDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIGxpbmUgPyBgPGRpdiBjbGFzcz1cImVycm9yLWdlbmVyYWxcIj4ke2xpbmV9PC9kaXY+YCA6ICcnO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuam9pbignJyk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGVPdXRwdXRVSShvdXRwdXRFbDogSFRNTEVsZW1lbnQsIGNvcHlCdG46IEhUTUxCdXR0b25FbGVtZW50LCByZXN1bHQ6IHsgc3Rkb3V0OiBzdHJpbmc7IHN0ZGVycjogc3RyaW5nIH0pIHtcclxuXHRcdGNvbnN0IGhhc091dHB1dCA9IHJlc3VsdC5zdGRvdXQudHJpbSgpLmxlbmd0aCA+IDA7XHJcblx0XHRjb25zdCBoYXNFcnJvcnMgPSByZXN1bHQuc3RkZXJyLnRyaW0oKS5sZW5ndGggPiAwO1xyXG5cclxuXHRcdC8vIE1vc3RyYSBvdXRwdXQgbm9ybWFsZVxyXG5cdFx0b3V0cHV0RWwuaW5uZXJIVE1MID0gcmVzdWx0LnN0ZG91dC5yZXBsYWNlKC9cXG4vZywgXCI8YnI+XCIpO1xyXG5cdFx0b3V0cHV0RWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuXHJcblx0XHQvLyBNb3N0cmEgZXJyb3JpIHNlOlxyXG5cdFx0Ly8gMS4gTCdvcHppb25lIFx1MDBFOCBhdHRpdmEgT1BQVVJFXHJcblx0XHQvLyAyLiBOb24gYydcdTAwRTggb3V0cHV0IG1hIGNpIHNvbm8gZXJyb3JpXHJcblx0XHRpZiAoKHRoaXMuc2V0dGluZ3Muc2hvd0Vycm9ycyB8fCAhaGFzT3V0cHV0KSAmJiBoYXNFcnJvcnMpIHtcclxuXHRcdFx0Y29uc3QgZXJyb3JDb250ZW50ID0gdGhpcy5jbGVhbkVycm9ycyhyZXN1bHQuc3RkZXJyKVxyXG5cdFx0XHRcdC5zcGxpdCgnXFxuJylcclxuXHRcdFx0XHQubWFwKGxpbmUgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgcGFydHMgPSBsaW5lLnNwbGl0KCc6Jyk7XHJcblx0XHRcdFx0XHRyZXR1cm4gYDxkaXYgY2xhc3M9XCJlcnJvci1saW5lXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGI+JHtwYXJ0c1swXX06PC9iPiBcclxuICAgICAgICAgICAgICAgICAgICAke3BhcnRzLnNsaWNlKDEpLmpvaW4oJzonKX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PmA7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuam9pbignJyk7XHJcblxyXG5cdFx0XHRjb25zdCBlcnJvckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHRcdFx0ZXJyb3JFbC5jbGFzc05hbWUgPSBcImRsdi1lcnJvclwiO1xyXG5cdFx0XHRlcnJvckVsLmlubmVySFRNTCA9IGA8cHJlPiR7ZXJyb3JDb250ZW50fTwvcHJlPmA7XHJcblx0XHRcdG91dHB1dEVsLmFwcGVuZENoaWxkKGVycm9yRWwpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvcHlCdG4uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVFeGVjdXRpb25SZXN1bHQocmVzdWx0OiB7IHN0ZG91dDogc3RyaW5nOyBzdGRlcnI6IHN0cmluZyB9KSB7XHJcblx0XHRjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCk7XHJcblx0XHRsZXQgY29udGVudCA9IGAlICR7dGltZXN0YW1wfVxcbmA7XHJcblxyXG5cdFx0aWYgKHJlc3VsdC5zdGRvdXQpIHtcclxuXHRcdFx0Y29udGVudCArPSBcIiUgQW5zd2VyU2V0XFxuXCIgK1xyXG5cdFx0XHRcdHJlc3VsdC5zdGRvdXQuc3BsaXQoJ1xcbicpXHJcblx0XHRcdFx0XHQubWFwKGxpbmUgPT4gYCUgJHtsaW5lfWApXHJcblx0XHRcdFx0XHQuam9pbignXFxuJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2hvd0Vycm9ycyAmJiByZXN1bHQuc3RkZXJyKSB7XHJcblx0XHRcdGNvbnRlbnQgKz0gXCJcXG4lIEVycm9yZVxcblwiICtcclxuXHRcdFx0XHRyZXN1bHQuc3RkZXJyLnNwbGl0KCdcXG4nKVxyXG5cdFx0XHRcdFx0Lm1hcChsaW5lID0+IGAlICR7bGluZX1gKVxyXG5cdFx0XHRcdFx0LmpvaW4oJ1xcbicpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0aWYgKGZpbGUpIHtcclxuXHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuYXBwZW5kKGZpbGUsIGBcXG5cXG4ke2NvbnRlbnQudHJpbSgpfWApO1xyXG5cdFx0XHRuZXcgTm90aWNlKFwiUmlzdWx0YXRvIHNhbHZhdG8gbmVsIGZpbGUhXCIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Y29weVRvQ2xpcGJvYXJkKHRleHQ6IHN0cmluZykge1xyXG5cdFx0bmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dCkudGhlbigoKSA9PiBuZXcgTm90aWNlKFwiQ29waWVkIHRvIGNsaXBib2FyZFwiKSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFkZFJ1bkJ1dHRvblRvSGVhZGVyKGZpbGU6IFRGaWxlKSB7XHJcblx0XHRjb25zdCB0aXRsZUJhciA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkudmlldy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFwiLnZpZXctaGVhZGVyXCIpO1xyXG5cdFx0aWYgKCF0aXRsZUJhcikgcmV0dXJuO1xyXG5cclxuXHRcdC8vIFJpbXVvdmkgZXZlbnR1YWxpIHB1bHNhbnRpIHByZWNlZGVudGlcclxuXHRcdGNvbnN0IGFjdGlvbnNDb250YWluZXIgPSB0aXRsZUJhci5xdWVyeVNlbGVjdG9yKFwiLnZpZXctYWN0aW9uc1wiKSB8fCB0aXRsZUJhci5xdWVyeVNlbGVjdG9yKFwiLnRpdGxlYmFyLWJ1dHRvbi1jb250YWluZXJcIik7XHJcblx0XHRpZiAoIWFjdGlvbnNDb250YWluZXIpIHJldHVybjtcclxuXHJcblx0XHQvLyBSaW11b3ZpIGV2ZW50dWFsaSBwdWxzYW50aSBwcmVjZWRlbnRpXHJcblx0XHRhY3Rpb25zQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kbHYtcnVuLWJ1dHRvbicpLmZvckVhY2goYnRuID0+IGJ0bi5yZW1vdmUoKSk7XHJcblxyXG5cdFx0Ly8gQ3JlYSBpbCBwdWxzYW50ZVxyXG5cdFx0Y29uc3QgcnVuQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHRcdHJ1bkJ0bi5jbGFzc05hbWUgPSBcImNsaWNrYWJsZS1pY29uIGRsdi1ydW4tYnV0dG9uXCI7XHJcblx0XHRydW5CdG4uaW5uZXJIVE1MID0gYFxyXG4gICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMThcIiBoZWlnaHQ9XCIxOFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIFxyXG4gICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiPlxyXG4gICAgICAgICAgICA8cG9seWdvbiBwb2ludHM9XCI1IDMgMTkgMTIgNSAyMSA1IDNcIi8+XHJcbiAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJkbHYtYnV0dG9uLXRleHRcIj5SdW48L3NwYW4+XHJcbiAgICBgO1xyXG5cclxuXHRcdC8vIFN0aWxlIGRlbCBwdWxzYW50ZVxyXG5cdFx0cnVuQnRuLnN0eWxlLmNzc1RleHQgPSBgXHJcbiAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICAgIGdhcDogNnB4O1xyXG4gICAgICAgIHBhZGRpbmc6IDRweCA4cHg7XHJcbiAgICAgICAgbWFyZ2luOiAwIDJweDtcclxuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgIHRvcDogLTFweDtcclxuICAgIGA7XHJcblxyXG5cdFx0Ly8gQWdnaXVuZ2kgaG92ZXIgZWZmZWN0XHJcblx0XHRydW5CdG4uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgKCkgPT4ge1xyXG5cdFx0XHRydW5CdG4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKVwiO1xyXG5cdFx0fSk7XHJcblx0XHRydW5CdG4uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgKCkgPT4ge1xyXG5cdFx0XHRydW5CdG4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ0cmFuc3BhcmVudFwiO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gRXZlbnRvIGNsaWNrXHJcblx0XHRydW5CdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcclxuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVEbHYoY29udGVudCwgZmlsZS5leHRlbnNpb24pO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZUV4ZWN1dGlvblJlc3VsdChyZXN1bHQpO1xyXG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRcdG5ldyBOb3RpY2UoYEVycm9yZTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiRXJyb3JlIHNjb25vc2NpdXRvXCJ9YCk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0YWN0aW9uc0NvbnRhaW5lci5pbnNlcnRCZWZvcmUocnVuQnRuLCBhY3Rpb25zQ29udGFpbmVyLmZpcnN0Q2hpbGQpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBtYXJrZG93blBvc3RQcm9jZXNzb3IoZWxlbWVudDogSFRNTEVsZW1lbnQsIGN0eDogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCkge1xyXG5cdFx0ZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwicHJlIGNvZGVcIikuZm9yRWFjaCgoY29kZUVsKSA9PiB7XHJcblx0XHRcdGNvbnN0IGVsID0gY29kZUVsIGFzIEhUTUxFbGVtZW50OyAvLyA8LS0gQWdnaXVuZ2kgdHlwZSBhc3NlcnRpb25cclxuXHRcdFx0Y29uc3QgbGFuZyA9IHRoaXMuZ2V0Q29kZUJsb2NrTGFuZ3VhZ2UoZWwpO1xyXG5cdFx0XHRpZiAoIWxhbmcgfHwgIXRoaXMuaXNTdXBwb3J0ZWRMYW5ndWFnZShsYW5nKSkgcmV0dXJuO1xyXG5cclxuXHRcdFx0Y29uc3QgeyBoZWFkZXIsIG91dHB1dFByZSwgY29weUJ0biB9ID0gdGhpcy5jcmVhdGVDb2RlQmxvY2tVSShsYW5nKTtcclxuXHRcdFx0Y29uc3QgcnVuQnRuID0gaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5ydW4tYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblx0XHRcdGNvbnN0IHNhdmVCdG4gPSBoZWFkZXIucXVlcnlTZWxlY3RvcignLnNhdmUtYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG5cdFx0XHRjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHRcdFx0d3JhcHBlci5jbGFzc05hbWUgPSBcImRsdi1jb2RlYmxvY2tcIjtcclxuXHRcdFx0d3JhcHBlci5hcHBlbmQoXHJcblx0XHRcdFx0aGVhZGVyLFxyXG5cdFx0XHRcdGVsLnBhcmVudEVsZW1lbnQhLmNsb25lTm9kZSh0cnVlKSxcclxuXHRcdFx0XHRvdXRwdXRQcmVcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdC8vIEFnZ2l1bmdpIGdlc3Rpb25lIGV2ZW50aVxyXG5cdFx0XHRydW5CdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVEbHYoZWwudGV4dENvbnRlbnQgfHwgXCJcIiwgbGFuZyk7XHJcblx0XHRcdFx0dGhpcy51cGRhdGVPdXRwdXRVSShvdXRwdXRQcmUsIGNvcHlCdG4sIHJlc3VsdCk7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRzYXZlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlRGx2KGVsLnRleHRDb250ZW50IHx8IFwiXCIsIGxhbmcpO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZUV4ZWN1dGlvblJlc3VsdChyZXN1bHQpO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Y29weUJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jb3B5VG9DbGlwYm9hcmQob3V0cHV0UHJlLnRleHRDb250ZW50IHx8IFwiXCIpO1xyXG5cclxuXHRcdFx0ZWwucGFyZW50RWxlbWVudD8ucmVwbGFjZVdpdGgod3JhcHBlcik7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZ2V0Q29kZUJsb2NrTGFuZ3VhZ2UoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuXHRcdGNvbnN0IGxhbmdDbGFzcyA9IEFycmF5LmZyb20oZWxlbWVudC5jbGFzc0xpc3QpLmZpbmQoYyA9PiBjLnN0YXJ0c1dpdGgoXCJsYW5ndWFnZS1cIikpO1xyXG5cdFx0cmV0dXJuIGxhbmdDbGFzcz8ucmVwbGFjZShcImxhbmd1YWdlLVwiLCBcIlwiKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgaXNTdXBwb3J0ZWRMYW5ndWFnZShsYW5nOiBzdHJpbmcpIHtcclxuXHRcdHJldHVybiB0aGlzLnNldHRpbmdzLmN1c3RvbUV4dGVuc2lvbnNcclxuXHRcdFx0LnNwbGl0KFwiLFwiKVxyXG5cdFx0XHQubWFwKGUgPT4gZS50cmltKCkudG9Mb3dlckNhc2UoKSlcclxuXHRcdFx0LnNvbWUoZSA9PiBsYW5nLnRvTG93ZXJDYXNlKCkgPT09IGUgfHwgbGFuZy50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoZSArIFwiLlwiKSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGlzU3VwcG9ydGVkRXh0ZW5zaW9uKGV4dDogc3RyaW5nKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5pc1N1cHBvcnRlZExhbmd1YWdlKGV4dCk7XHJcblx0fVxyXG5cclxuXHRnZXRFZGl0b3JEZWNvcmF0aW9uKCkge1xyXG5cdFx0cmV0dXJuIEVkaXRvclZpZXcuZGVjb3JhdGlvbnMuY29tcHV0ZShbXCJkb2NcIl0sIHN0YXRlID0+IHtcclxuXHRcdFx0Y29uc3QgYnVpbGRlciA9IG5ldyBSYW5nZVNldEJ1aWxkZXI8RGVjb3JhdGlvbj4oKTtcclxuXHRcdFx0Y29uc3QgdGV4dCA9IHN0YXRlLmRvYy50b1N0cmluZygpO1xyXG5cdFx0XHRjb25zdCByZWdleCA9IC9gYGAoXFxTKylcXG4oW1xcc1xcU10qPylgYGAvZztcclxuXHJcblx0XHRcdGxldCBtYXRjaDtcclxuXHRcdFx0d2hpbGUgKChtYXRjaCA9IHJlZ2V4LmV4ZWModGV4dCkpICE9PSBudWxsKSB7XHJcblx0XHRcdFx0Y29uc3QgbGFuZyA9IG1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdFx0aWYgKHRoaXMuaXNTdXBwb3J0ZWRMYW5ndWFnZShsYW5nKSkge1xyXG5cdFx0XHRcdFx0Y29uc3Qgc3RhcnQgPSBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmluZGV4T2YobWF0Y2hbMl0pO1xyXG5cdFx0XHRcdFx0Y29uc3QgZW5kID0gc3RhcnQgKyBtYXRjaFsyXS5sZW5ndGg7XHJcblx0XHRcdFx0XHRidWlsZGVyLmFkZChlbmQsIGVuZCwgRGVjb3JhdGlvbi53aWRnZXQoe1xyXG5cdFx0XHRcdFx0XHR3aWRnZXQ6IG5ldyBDb2RlQmxvY2tXaWRnZXQodGhpcywgbGFuZywgc3RhcnQsIGVuZCwgdGV4dCksXHJcblx0XHRcdFx0XHRcdHNpZGU6IDFcclxuXHRcdFx0XHRcdH0pKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGJ1aWxkZXIuZmluaXNoKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZVBsdWdpblBhdGgoKSB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyBPdHRpZW5pIGlsIHBlcmNvcnNvIGJhc2UgY29ycmV0dG8gZGVsbGEgdmF1bHRcclxuXHRcdFx0Y29uc3QgdmF1bHRQYXRoID0gKHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIgYXMgYW55KS5iYXNlUGF0aDsgLy8gPC0tIE1vZGlmaWNhIHF1aVxyXG5cclxuXHRcdFx0Ly8gQ29zdHJ1aXNjaSBpbCBwZXJjb3JzbyBkZWwgcGx1Z2luIGNvcnJldHRhbWVudGVcclxuXHRcdFx0aWYgKHRoaXMubWFuaWZlc3QuZGlyICE9IG51bGwpIHtcclxuXHRcdFx0XHR0aGlzLnBsdWdpblBhdGggPSBwYXRoLmpvaW4oXHJcblx0XHRcdFx0XHR2YXVsdFBhdGgsXHJcblx0XHRcdFx0XHR0aGlzLm1hbmlmZXN0LmRpclxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIERlYnVnXHJcblx0XHRcdGNvbnNvbGUubG9nKFwiUGVyY29yc28gY29ycmV0dG8gZGVsIHBsdWdpbjpcIiwgdGhpcy5wbHVnaW5QYXRoKTtcclxuXHJcblx0XHRcdGF3YWl0IGZzLm1rZGlyKHRoaXMucGx1Z2luUGF0aCwgeyByZWN1cnNpdmU6IHRydWUgfSk7XHJcblxyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yZSBpbml6aWFsaXp6YXppb25lIHBsdWdpbjpcIiwgZXJyb3IpO1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDb25maWd1cmF6aW9uZSBwbHVnaW4gbm9uIHZhbGlkYVwiKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIHJlZnJlc2hFeGVjdXRhYmxlc0xpc3QoKSB7XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5kbHZMb2NhdGlvblR5cGUgPT09IFwicmVsYXRpdmVcIikge1xyXG5cdFx0XHQvLyA1LiBQZXJjb3JzbyBlc2VndWliaWxpIGNvcnJldHRvXHJcblx0XHRcdGNvbnN0IGV4ZWN1dGFibGVzUGF0aCA9IHBhdGguam9pbih0aGlzLnBsdWdpblBhdGgsIFwiZXhlY3V0YWJsZXNcIik7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiUGVyY29yc28gZXNlZ3VpYmlsaTpcIiwgZXhlY3V0YWJsZXNQYXRoKTtcclxuXHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0Y29uc3QgZmlsZXMgPSBhd2FpdCBmcy5yZWFkZGlyKGV4ZWN1dGFibGVzUGF0aCk7XHJcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5hdmFpbGFibGVFeGVjdXRhYmxlcyA9IGZpbGVzXHJcblx0XHRcdFx0XHQuZmlsdGVyKGYgPT4gZi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkbHYnKSlcclxuXHRcdFx0XHRcdC5tYXAoZiA9PiBwYXRoLmpvaW4oJ2V4ZWN1dGFibGVzJywgZikpO1xyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIkVzZWd1aWJpbGkgdHJvdmF0aTpcIiwgdGhpcy5zZXR0aW5ncy5hdmFpbGFibGVFeGVjdXRhYmxlcyk7XHJcblxyXG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJFcnJvcmUgc2NhbnNpb25lIGVzZWd1aWJpbGk6XCIsIGVycm9yKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBpc1ZhbGlkRXhlY3V0YWJsZShmaWxlbmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0XHQvLyBWZXJpZmljYSBwZXIgV2luZG93c1xyXG5cdFx0aWYgKHByb2Nlc3MucGxhdGZvcm0gPT09ICd3aW4zMicpIHtcclxuXHRcdFx0cmV0dXJuIGZpbGVuYW1lLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5leGUnKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBWZXJpZmljYSBwZXIgTGludXgvTWFjIChjb250cm9sbG8gcGF0dGVybiBub21lKVxyXG5cdFx0cmV0dXJuIC9eZGx2Wy1fXT8obGludXh8bWFjfC4qKS9pLnRlc3QoZmlsZW5hbWUpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBnZXREbHZQYXRoKCkge1xyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuZGx2TG9jYXRpb25UeXBlID09PSBcImFic29sdXRlXCIpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuc2V0dGluZ3MuYWJzb2x1dGVQYXRoO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIDQuIENvc3RydXppb25lIHBlcmNvcnNvIHJlbGF0aXZvIGNvcnJldHRhXHJcblx0XHRyZXR1cm4gcGF0aC5qb2luKFxyXG5cdFx0XHR0aGlzLnBsdWdpblBhdGgsXHJcblx0XHRcdHRoaXMuc2V0dGluZ3MucmVsYXRpdmVFeGVjdXRhYmxlXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcblx0XHRhd2FpdCB0aGlzLnJlZnJlc2hFeGVjdXRhYmxlc0xpc3QoKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdC8vIFZhbGlkYXppb25lIHJpbmZvcnphdGFcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmRsdkxvY2F0aW9uVHlwZSA9PT0gJ3JlbGF0aXZlJykge1xyXG5cdFx0XHRjb25zdCBmdWxsUGF0aCA9IHBhdGguam9pbih0aGlzLnBsdWdpblBhdGgsIHRoaXMuc2V0dGluZ3MucmVsYXRpdmVFeGVjdXRhYmxlKTtcclxuXHJcblx0XHRcdGlmICghYXdhaXQgZnMuYWNjZXNzKGZ1bGxQYXRoKS50aGVuKCgpID0+IHRydWUpLmNhdGNoKCgpID0+IGZhbHNlKSkge1xyXG5cdFx0XHRcdG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBFc2VndWliaWxlIG5vbiB0cm92YXRvIG5lbCBwZXJjb3JzbyByZWxhdGl2byEnKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGlmICghYXdhaXQgZnMuYWNjZXNzKHRoaXMuc2V0dGluZ3MuYWJzb2x1dGVQYXRoKS50aGVuKCgpID0+IHRydWUpLmNhdGNoKCgpID0+IGZhbHNlKSkge1xyXG5cdFx0XHRcdG5ldyBOb3RpY2UoJ1x1MjZBMFx1RkUwRiBQZXJjb3JzbyBhc3NvbHV0byBub24gdmFsaWRvIScpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG5cclxuXHRvbnVubG9hZCgpIHtcclxuXHRcdHRoaXMuc3R5bGVzRWw/LnJlbW92ZSgpO1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgRGx2U2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogRGx2UGx1Z2luO1xyXG5cdHByaXZhdGUgdHlwZURyb3Bkb3duOiBEcm9wZG93bkNvbXBvbmVudDtcclxuXHRwcml2YXRlIGFic29sdXRlU2V0dGluZzogU2V0dGluZztcclxuXHRwcml2YXRlIHJlbGF0aXZlU2V0dGluZzogU2V0dGluZztcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRGx2UGx1Z2luKSB7XHJcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdGRpc3BsYXkoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0RMViBQbHVnaW4gU2V0dGluZ3MnIH0pO1xyXG5cclxuXHRcdC8vIFRpcG8gZGkgaW5zdGFsbGF6aW9uZVxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdJbnN0YWxsYXRpb24gVHlwZScpXHJcblx0XHRcdC5zZXREZXNjKCdTZWxlY3QgRExWIGV4ZWN1dGFibGUgbG9jYXRpb24gdHlwZScpXHJcblx0XHRcdC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XHJcblx0XHRcdFx0dGhpcy50eXBlRHJvcGRvd24gPSBkcm9wZG93blxyXG5cdFx0XHRcdFx0LmFkZE9wdGlvbignYWJzb2x1dGUnLCAnQWJzb2x1dGUgUGF0aCcpXHJcblx0XHRcdFx0XHQuYWRkT3B0aW9uKCdyZWxhdGl2ZScsICdSZWxhdGl2ZSB0byBQbHVnaW4nKVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRsdkxvY2F0aW9uVHlwZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGx2TG9jYXRpb25UeXBlID0gdmFsdWUgYXMgXCJhYnNvbHV0ZVwiIHwgXCJyZWxhdGl2ZVwiO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5yZWZyZXNoRXhlY3V0YWJsZXNMaXN0KCk7XHJcblx0XHRcdFx0XHRcdHRoaXMudXBkYXRlU2V0dGluZ3NWaXNpYmlsaXR5KCk7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdC8vIFBlcmNvcnNvIGFzc29sdXRvXHJcblx0XHR0aGlzLmFic29sdXRlU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnQWJzb2x1dGUgUGF0aCcpXHJcblx0XHRcdC5zZXREZXNjKCdGdWxsIHBhdGggdG8gRExWIGV4ZWN1dGFibGUgKGUuZy4gQzovZGx2L2Rsdi5leGUpJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFic29sdXRlUGF0aClcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hYnNvbHV0ZVBhdGggPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHJcblx0XHQvLyBQZXJjb3JzbyByZWxhdGl2b1xyXG5cdFx0dGhpcy5yZWxhdGl2ZVNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1BsdWdpbiBFeGVjdXRhYmxlJylcclxuXHRcdFx0LnNldERlc2MoJ1NlbGVjdCBleGVjdXRhYmxlIGZyb20gcGx1Z2luIGZvbGRlcicpXHJcblx0XHRcdC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXZhaWxhYmxlRXhlY3V0YWJsZXMuZm9yRWFjaChleGUgPT4ge1xyXG5cdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKGV4ZSwgZXhlLnNwbGl0KCcvJykucG9wKCkgfHwgZXhlKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRkcm9wZG93blxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbGF0aXZlRXhlY3V0YWJsZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucmVsYXRpdmVFeGVjdXRhYmxlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdC8vIEFsdHJlIGltcG9zdGF6aW9uaVxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdTdXBwb3J0ZWQgRmlsZSBFeHRlbnNpb25zJylcclxuXHRcdFx0LnNldERlc2MoJ0NvbW1hLXNlcGFyYXRlZCBsaXN0IChlLmcuIGFzcCxkbHYscHJvbG9nKScpXHJcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21FeHRlbnNpb25zKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUV4dGVuc2lvbnMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1Nob3cgQWxsIE1vZGVscycpXHJcblx0XHRcdC5zZXREZXNjKCdFbmFibGUgLW4gMCBmbGFnIHRvIHNob3cgYWxsIGFuc3dlciBzZXRzJylcclxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dBbGxNb2RlbHMpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0FsbE1vZGVscyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnSGlkZSBGYWN0cycpXHJcblx0XHRcdC5zZXREZXNjKCdFbmFibGUgLS1uby1mYWN0cyBmbGFnIHRvIGhpZGUgZmFjdHMnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUZhY3RzKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVGYWN0cyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnRXJyb3IgSGFuZGxpbmcnKVxyXG5cdFx0XHQuc2V0RGVzYygnU2hvdyBlcnJvciBtZXNzYWdlcyBpbiBvdXRwdXQnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0Vycm9ycylcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RXJyb3JzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0dGhpcy51cGRhdGVTZXR0aW5nc1Zpc2liaWxpdHkoKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgdXBkYXRlU2V0dGluZ3NWaXNpYmlsaXR5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgaXNBYnNvbHV0ZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmRsdkxvY2F0aW9uVHlwZSA9PT0gXCJhYnNvbHV0ZVwiO1xyXG5cclxuXHRcdHRoaXMuYWJzb2x1dGVTZXR0aW5nLnNldHRpbmdFbC5zdHlsZS5kaXNwbGF5ID0gaXNBYnNvbHV0ZSA/IFwiXCIgOiBcIm5vbmVcIjtcclxuXHRcdHRoaXMucmVsYXRpdmVTZXR0aW5nLnNldHRpbmdFbC5zdHlsZS5kaXNwbGF5ID0gaXNBYnNvbHV0ZSA/IFwibm9uZVwiIDogXCJcIjtcclxuXHJcblx0XHQvLyBBZ2dpb3JuYSBsYSBsaXN0YSBuZWwgZHJvcGRvd25cclxuXHRcdGNvbnN0IGRyb3Bkb3duID0gdGhpcy5yZWxhdGl2ZVNldHRpbmcuY29udHJvbEVsLnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdCcpO1xyXG5cdFx0aWYgKGRyb3Bkb3duKSB7XHJcblx0XHRcdGRyb3Bkb3duLmlubmVySFRNTCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmF2YWlsYWJsZUV4ZWN1dGFibGVzXHJcblx0XHRcdFx0Lm1hcChleGUgPT4gYDxvcHRpb24gdmFsdWU9XCIke2V4ZX1cIj4ke3BhdGguYmFzZW5hbWUoZXhlKX08L29wdGlvbj5gKVxyXG5cdFx0XHRcdC5qb2luKCcnKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBNZXNzYWdnaW8gZGV0dGFnbGlhdG9cclxuXHRcdGNvbnN0IGJhc2VQYXRoID0gcGF0aC5qb2luKHRoaXMucGx1Z2luLnBsdWdpblBhdGgsICdleGVjdXRhYmxlcycpO1xyXG5cdFx0Y29uc3QgZmlsZUxpc3QgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdmFpbGFibGVFeGVjdXRhYmxlc1xyXG5cdFx0XHQubWFwKGV4ZSA9PiBgXHUyMDIyICR7cGF0aC5iYXNlbmFtZShleGUpfWApXHJcblx0XHRcdC5qb2luKCdcXG4nKTtcclxuXHJcblx0XHR0aGlzLnJlbGF0aXZlU2V0dGluZy5kZXNjRWwuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICBQZXJjb3JzbyBzY2FubmVyaXp6YXRvOiA8Y29kZT4ke2Jhc2VQYXRofTwvY29kZT48YnI+XHJcbiAgICAgICAgICAgIEZpbGUgdHJvdmF0aTogJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdmFpbGFibGVFeGVjdXRhYmxlcy5sZW5ndGh9XHJcbiAgICAgICAgICAgIDxwcmUgc3R5bGU9XCJtYXJnaW4tdG9wOjVweFwiPiR7ZmlsZUxpc3QgfHwgJ05lc3N1biBmaWxlIHZhbGlkbyB0cm92YXRvJ308L3ByZT5cclxuICAgICAgICBgO1xyXG5cdH1cclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQVNPO0FBQ1AsMkJBQXFCO0FBQ3JCLGtCQUEwQjtBQUMxQixtQkFBZ0M7QUFDaEMsa0JBQWlEO0FBQ2pELFdBQXNCO0FBQ3RCLGdCQUErQjtBQUMvQixTQUFvQjtBQUVwQixJQUFNLGdCQUFZLHVCQUFVLHlCQUFJO0FBY2hDLElBQU0sbUJBQXNDO0FBQUEsRUFDM0MsaUJBQWlCO0FBQUEsRUFDakIsY0FBYztBQUFBLEVBQ2Qsb0JBQW9CO0FBQUEsRUFDcEIsc0JBQXNCLENBQUM7QUFBQSxFQUN2QixrQkFBa0I7QUFBQSxFQUNsQixZQUFZO0FBQUEsRUFDWixlQUFlO0FBQUEsRUFDZixXQUFXO0FBQUEsRUFDWCxjQUFjO0FBQ2Y7QUFFQSxJQUFNLGtCQUFOLGNBQThCLHVCQUFXO0FBQUEsRUFDeEMsWUFDUyxRQUNBLE1BQ0EsT0FDQSxLQUNBLFNBQ1A7QUFBRSxVQUFNO0FBTEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBLEVBQ0k7QUFBQSxFQUViLFFBQVE7QUFDUCxVQUFNLEVBQUUsUUFBUSxXQUFXLFFBQVEsSUFBSSxLQUFLLE9BQU8sa0JBQWtCLEtBQUssSUFBSTtBQUM5RSxVQUFNLFNBQVMsT0FBTyxjQUFjLFVBQVU7QUFDOUMsVUFBTSxVQUFVLE9BQU8sY0FBYyxXQUFXO0FB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
