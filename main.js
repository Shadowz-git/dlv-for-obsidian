/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => DlvPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var import_child_process = require("child_process");
var import_util = require("util");
var import_state = require("@codemirror/state");
var import_view = require("@codemirror/view");
var path = __toESM(require("path"));
var import_fs = require("fs");
var os = __toESM(require("os"));
var execAsync = (0, import_util.promisify)(import_child_process.exec);
var DEFAULT_SETTINGS = {
  dlvLocationType: "relative",
  absolutePath: "",
  relativeExecutable: "executables/dlv.exe",
  availableExecutables: [],
  customExtensions: "asp",
  showErrors: false,
  showAllModels: false,
  hideFacts: false,
  cacheResults: true
};
var CodeBlockWidget = class extends import_view.WidgetType {
  constructor(plugin, lang, start, end, docText) {
    super();
    this.plugin = plugin;
    this.lang = lang;
    this.start = start;
    this.end = end;
    this.docText = docText;
  }
  toDOM() {
    const { header, outputPre, copyBtn } = this.plugin.createCodeBlockUI(this.lang);
    const runBtn = header.querySelector(".run-btn");
    const saveBtn = header.querySelector(".save-btn");
    runBtn.onclick = async () => {
      runBtn.disabled = true;
      try {
        const codeContent = this.docText.slice(this.start, this.end).trim();
        const result = await this.plugin.executeDlv(codeContent, this.lang);
        this.plugin.updateOutputUI(outputPre, copyBtn, result);
      } finally {
        runBtn.disabled = false;
      }
    };
    saveBtn.onclick = async () => {
      saveBtn.disabled = true;
      try {
        const codeContent = this.docText.slice(this.start, this.end).trim();
        const result = await this.plugin.executeDlv(codeContent, this.lang);
        await this.plugin.saveExecutionResult(result);
      } finally {
        saveBtn.disabled = false;
      }
    };
    copyBtn.onclick = () => this.plugin.copyToClipboard(outputPre.textContent || "");
    const container = document.createElement("div");
    container.className = "dlv-codeblock";
    container.append(header, outputPre);
    return container;
  }
  eq(other) {
    return this.start === other.start && this.end === other.end && this.lang === other.lang;
  }
};
var DlvPlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.initializePluginPath();
    await this.loadSettings();
    this.addStyle();
    this.registerEditorExtension(this.getEditorDecoration());
    this.registerMarkdownPostProcessor(this.markdownPostProcessor.bind(this));
    this.addSettingTab(new DlvSettingTab(this.app, this));
    this.registerFileHeaderButtons();
  }
  registerFileHeaderButtons() {
    this.registerEvent(this.app.workspace.on("file-open", (file) => {
      if (file instanceof import_obsidian.TFile && this.isSupportedExtension(file.extension)) {
        this.addRunButtonToHeader(file);
      }
    }));
  }
  addStyle() {
    this.stylesEl = document.createElement("style");
    this.stylesEl.textContent = `
            .dlv-codeblock {
                border: 1px solid var(--background-modifier-border);
                border-radius: 4px;
                margin: 1rem 0;
                padding: 0.5rem;
            }
            .dlv-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 0.5rem;
                margin-top: 0.5rem;
            }
            .dlv-output {
                white-space: pre-wrap;
                word-break: break-word;
                padding: 0.5rem;
                background: var(--background-primary);
                border: 1px solid var(--background-modifier-border);
                position: relative;
            }
            .dlv-error {
				background: var(--background-secondary);
				padding: 0.5rem;
				border-radius: 4px;
				margin-top: 0.5rem;
				border-left: 3px solid #ff5555;
			}
			
			.error-icon {
				margin-right: 0.5rem;
				color: #ff5555;
			}
			
			.error-content {
				display: inline-block;
				vertical-align: middle;
			}
			
			.error-line {
				margin: 0.25rem 0;
				font-family: var(--font-monospace);
				font-size: 0.9em;
			}
            .dlv-buttons {
                display: flex;
                gap: 0.5rem;
            }
			.dlv-run-container {
				gap: 4px;
				margin-right: 12px;
			}
			.dlv-run-button {
				color: var(--text-normal) !important;
				transition: background-color 0.15s ease;
			}
			.dlv-run-button:hover {
				background-color: var(--background-modifier-hover) !important;
			}
			.dlv-run-button svg {
				flex-shrink: 0;
			}
			.dlv-button-text {
				font-size: 0.85em;
				position: relative;
				bottom: 0.076rem;
			}
			@media (max-width: 400px) {
				.dlv-button-text {
					display: none;
				}
			}
			.dlv-tooltip {
				color: var(--text-muted);
				font-size: 0.85em;
			}
        `;
    document.head.appendChild(this.stylesEl);
  }
  createCodeBlockUI(lang) {
    const header = document.createElement("div");
    header.className = "dlv-header";
    const langLabel = document.createElement("span");
    langLabel.textContent = lang.toUpperCase();
    const buttons = document.createElement("div");
    buttons.className = "dlv-buttons";
    const runBtn = this.createButton("\u25B6 Run", "run-btn");
    const saveBtn = this.createButton("\u{1F4BE} Save", "save-btn");
    const copyBtn = this.createButton("\u{1F4CB} Copy", "copy-btn");
    buttons.append(runBtn, saveBtn);
    header.append(langLabel, buttons);
    const outputPre = document.createElement("pre");
    outputPre.className = "dlv-output";
    outputPre.style.display = "none";
    return { header, outputPre, copyBtn };
  }
  createButton(text, className) {
    const btn = document.createElement("button");
    btn.className = className;
    btn.textContent = text;
    return btn;
  }
  async executeDlv(content, lang) {
    try {
      const dlvPath = this.getDlvPath();
      await import_fs.promises.access(dlvPath);
      const tmpDir = os.tmpdir();
      await import_fs.promises.mkdir(tmpDir, { recursive: true });
      const tmpFile = path.join(tmpDir, `dlv-temp-${Date.now()}.${lang}`);
      await import_fs.promises.writeFile(tmpFile, content, "utf8");
      const args = [tmpFile];
      if (this.settings.showAllModels)
        args.push("-n", "0");
      if (this.settings.hideFacts)
        args.push("--no-facts");
      const { stdout, stderr } = await execAsync(
        `"${dlvPath}" ${args.map((arg) => `"${arg}"`).join(" ")}`,
        {
          shell: process.platform === "win32" ? "cmd.exe" : void 0,
          windowsHide: true,
          encoding: "utf-8"
        }
      );
      await import_fs.promises.unlink(tmpFile).catch(() => {
      });
      return {
        stdout: this.cleanOutput(stdout),
        stderr: this.cleanErrors(stderr)
      };
    } catch (error) {
      let errorMessage = "Errore sconosciuto";
      if (error instanceof Error) {
        errorMessage = error.message;
        console.error("Errore executeDlv:", error);
      }
      return {
        stdout: "",
        stderr: errorMessage
      };
    }
  }
  cleanOutput(output) {
    return output.replace(/^DLV \d+\.\d+\.\d+\s*\n/, "").replace(/Generic warning: .*\n?/g, "").trim();
  }
  cleanErrors(errorOutput) {
    const lines = errorOutput.split("\n").map((line) => {
      line = line.replace(/([A-Za-z]:\\[^\s]+|\/[^\s]+)/g, "").replace(/(dlv-temp-\d+\.asp)/gi, "Input");
      const errorMatch = line.match(/(line \d+):\s*(.*)/i);
      if (errorMatch) {
        return `${errorMatch[1]}: ${errorMatch[2].replace(/^.*?:\s*/, "")}`;
      }
      return line.includes("Command failed:") || line.includes("Aborting due to") ? "" : line;
    }).filter((line) => line.trim().length > 0);
    return lines.join("\n").replace(/(line \d+):/gi, "Errore:\n$1").replace(/[.:]+$/, "").trim();
  }
  formatErrorMessages(errorString) {
    return errorString.split("\n").map((line) => {
      const match = line.match(/Linea (\d+):\s*(.*)/i);
      if (match) {
        return `<div class="error-line">
                    <span class="error-line-number">Linea ${match[1]}:</span>
                    <span class="error-message">${match[2]}</span>
                </div>`;
      }
      return line ? `<div class="error-general">${line}</div>` : "";
    }).join("");
  }
  updateOutputUI(outputEl, copyBtn, result) {
    outputEl.innerHTML = result.stdout.replace(/\n/g, "<br>");
    outputEl.style.display = "block";
    if (this.settings.showErrors && result.stderr) {
      const errorContent = this.cleanErrors(result.stderr).split("\n").map((line) => `<div class="error-line"><b>${line.split(":")[0]}:</b> ${line.split(":").slice(1).join(":")}</div>`).join("");
      const errorEl = document.createElement("div");
      errorEl.className = "dlv-error";
      errorEl.innerHTML = `<pre>${errorContent}</pre>`;
      outputEl.appendChild(errorEl);
    }
    copyBtn.style.display = "block";
  }
  async saveExecutionResult(result) {
    const timestamp = new Date().toLocaleString();
    let content = `% ${timestamp}
`;
    if (result.stdout) {
      content += "% AnswerSet\n" + result.stdout.split("\n").map((line) => `% ${line}`).join("\n");
    }
    if (this.settings.showErrors && result.stderr) {
      content += "\n% Errore\n" + result.stderr.split("\n").map((line) => `% ${line}`).join("\n");
    }
    const file = this.app.workspace.getActiveFile();
    if (file) {
      await this.app.vault.append(file, `

${content.trim()}`);
      new import_obsidian.Notice("Risultato salvato nel file!");
    }
  }
  copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(() => new import_obsidian.Notice("Copied to clipboard"));
  }
  addRunButtonToHeader(file) {
    const titleBar = this.app.workspace.getLeaf().view.containerEl.querySelector(".view-header");
    if (!titleBar)
      return;
    const actionsContainer = titleBar.querySelector(".view-actions") || titleBar.querySelector(".titlebar-button-container");
    if (!actionsContainer)
      return;
    actionsContainer.querySelectorAll(".dlv-run-button").forEach((btn) => btn.remove());
    const runBtn = document.createElement("div");
    runBtn.className = "clickable-icon dlv-run-button";
    runBtn.innerHTML = `
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" 
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="5 3 19 12 5 21 5 3"/>
        </svg>
        <span class="dlv-button-text">Run</span>
    `;
    runBtn.style.cssText = `
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 4px 8px;
        margin: 0 2px;
        border-radius: 4px;
        position: relative;
        top: -1px;
    `;
    runBtn.addEventListener("mouseenter", () => {
      runBtn.style.backgroundColor = "var(--background-modifier-hover)";
    });
    runBtn.addEventListener("mouseleave", () => {
      runBtn.style.backgroundColor = "transparent";
    });
    runBtn.onclick = async () => {
      try {
        const content = await this.app.vault.read(file);
        const result = await this.executeDlv(content, file.extension);
        await this.saveExecutionResult(result);
      } catch (error) {
        new import_obsidian.Notice(`Errore: ${error instanceof Error ? error.message : "Errore sconosciuto"}`);
      }
    };
    actionsContainer.insertBefore(runBtn, actionsContainer.firstChild);
  }
  markdownPostProcessor(element, ctx) {
    element.querySelectorAll("pre code").forEach((codeEl) => {
      var _a;
      const el = codeEl;
      const lang = this.getCodeBlockLanguage(el);
      if (!lang || !this.isSupportedLanguage(lang))
        return;
      const { header, outputPre, copyBtn } = this.createCodeBlockUI(lang);
      const runBtn = header.querySelector(".run-btn");
      const saveBtn = header.querySelector(".save-btn");
      const wrapper = document.createElement("div");
      wrapper.className = "dlv-codeblock";
      wrapper.append(
        header,
        el.parentElement.cloneNode(true),
        outputPre
      );
      runBtn.onclick = async () => {
        const result = await this.executeDlv(el.textContent || "", lang);
        this.updateOutputUI(outputPre, copyBtn, result);
      };
      saveBtn.onclick = async () => {
        const result = await this.executeDlv(el.textContent || "", lang);
        await this.saveExecutionResult(result);
      };
      copyBtn.onclick = () => this.copyToClipboard(outputPre.textContent || "");
      (_a = el.parentElement) == null ? void 0 : _a.replaceWith(wrapper);
    });
  }
  getCodeBlockLanguage(element) {
    const langClass = Array.from(element.classList).find((c) => c.startsWith("language-"));
    return langClass == null ? void 0 : langClass.replace("language-", "");
  }
  isSupportedLanguage(lang) {
    return this.settings.customExtensions.split(",").map((e) => e.trim().toLowerCase()).some((e) => lang.toLowerCase() === e || lang.toLowerCase().startsWith(e + "."));
  }
  isSupportedExtension(ext) {
    return this.isSupportedLanguage(ext);
  }
  getEditorDecoration() {
    return import_view.EditorView.decorations.compute(["doc"], (state) => {
      const builder = new import_state.RangeSetBuilder();
      const text = state.doc.toString();
      const regex = /```(\S+)\n([\s\S]*?)```/g;
      let match;
      while ((match = regex.exec(text)) !== null) {
        const lang = match[1].toLowerCase();
        if (this.isSupportedLanguage(lang)) {
          const start = match.index + match[0].indexOf(match[2]);
          const end = start + match[2].length;
          builder.add(end, end, import_view.Decoration.widget({
            widget: new CodeBlockWidget(this, lang, start, end, text),
            side: 1
          }));
        }
      }
      return builder.finish();
    });
  }
  async initializePluginPath() {
    try {
      const vaultPath = this.app.vault.adapter.basePath;
      if (this.manifest.dir != null) {
        this.pluginPath = path.join(
          vaultPath,
          this.manifest.dir
        );
      }
      console.log("Percorso corretto del plugin:", this.pluginPath);
      await import_fs.promises.mkdir(this.pluginPath, { recursive: true });
    } catch (error) {
      console.error("Errore inizializzazione plugin:", error);
      throw new Error("Configurazione plugin non valida");
    }
  }
  async refreshExecutablesList() {
    if (this.settings.dlvLocationType === "relative") {
      const executablesPath = path.join(this.pluginPath, "executables");
      console.log("Percorso eseguibili:", executablesPath);
      try {
        const files = await import_fs.promises.readdir(executablesPath);
        this.settings.availableExecutables = files.filter((f) => f.toLowerCase().includes("dlv")).map((f) => path.join("executables", f));
        console.log("Eseguibili trovati:", this.settings.availableExecutables);
      } catch (error) {
        console.error("Errore scansione eseguibili:", error);
      }
    }
  }
  isValidExecutable(filename) {
    if (process.platform === "win32") {
      return filename.toLowerCase().endsWith(".exe");
    }
    return /^dlv[-_]?(linux|mac|.*)/i.test(filename);
  }
  getDlvPath() {
    if (this.settings.dlvLocationType === "absolute") {
      return this.settings.absolutePath;
    }
    return path.join(
      this.pluginPath,
      this.settings.relativeExecutable
    );
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
    await this.refreshExecutablesList();
  }
  async saveSettings() {
    if (this.settings.dlvLocationType === "relative") {
      const fullPath = path.join(this.pluginPath, this.settings.relativeExecutable);
      if (!await import_fs.promises.access(fullPath).then(() => true).catch(() => false)) {
        new import_obsidian.Notice("\u26A0\uFE0F Eseguibile non trovato nel percorso relativo!");
        return;
      }
    } else {
      if (!await import_fs.promises.access(this.settings.absolutePath).then(() => true).catch(() => false)) {
        new import_obsidian.Notice("\u26A0\uFE0F Percorso assoluto non valido!");
        return;
      }
    }
    await this.saveData(this.settings);
  }
  onunload() {
    var _a;
    (_a = this.stylesEl) == null ? void 0 : _a.remove();
  }
};
var DlvSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "DLV Plugin Settings" });
    new import_obsidian.Setting(containerEl).setName("Installation Type").setDesc("Select DLV executable location type").addDropdown((dropdown) => {
      this.typeDropdown = dropdown.addOption("absolute", "Absolute Path").addOption("relative", "Relative to Plugin").setValue(this.plugin.settings.dlvLocationType).onChange(async (value) => {
        this.plugin.settings.dlvLocationType = value;
        await this.plugin.refreshExecutablesList();
        this.updateSettingsVisibility();
        await this.plugin.saveSettings();
      });
    });
    this.absoluteSetting = new import_obsidian.Setting(containerEl).setName("Absolute Path").setDesc("Full path to DLV executable (e.g. C:/dlv/dlv.exe)").addText((text) => text.setValue(this.plugin.settings.absolutePath).onChange(async (value) => {
      this.plugin.settings.absolutePath = value;
      await this.plugin.saveSettings();
    }));
    this.relativeSetting = new import_obsidian.Setting(containerEl).setName("Plugin Executable").setDesc("Select executable from plugin folder").addDropdown((dropdown) => {
      this.plugin.settings.availableExecutables.forEach((exe) => {
        dropdown.addOption(exe, exe.split("/").pop() || exe);
      });
      dropdown.setValue(this.plugin.settings.relativeExecutable).onChange(async (value) => {
        this.plugin.settings.relativeExecutable = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Supported File Extensions").setDesc("Comma-separated list (e.g. asp,dlv,prolog)").addText((text) => text.setValue(this.plugin.settings.customExtensions).onChange(async (value) => {
      this.plugin.settings.customExtensions = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Show All Models").setDesc("Enable -n 0 flag to show all answer sets").addToggle((toggle) => toggle.setValue(this.plugin.settings.showAllModels).onChange(async (value) => {
      this.plugin.settings.showAllModels = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Hide Facts").setDesc("Enable --no-facts flag to hide facts").addToggle((toggle) => toggle.setValue(this.plugin.settings.hideFacts).onChange(async (value) => {
      this.plugin.settings.hideFacts = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Error Handling").setDesc("Show error messages in output").addToggle((toggle) => toggle.setValue(this.plugin.settings.showErrors).onChange(async (value) => {
      this.plugin.settings.showErrors = value;
      await this.plugin.saveSettings();
    }));
    this.updateSettingsVisibility();
  }
  updateSettingsVisibility() {
    const isAbsolute = this.plugin.settings.dlvLocationType === "absolute";
    this.absoluteSetting.settingEl.style.display = isAbsolute ? "" : "none";
    this.relativeSetting.settingEl.style.display = isAbsolute ? "none" : "";
    const dropdown = this.relativeSetting.controlEl.querySelector("select");
    if (dropdown) {
      dropdown.innerHTML = this.plugin.settings.availableExecutables.map((exe) => `<option value="${exe}">${path.basename(exe)}</option>`).join("");
    }
    const basePath = path.join(this.plugin.pluginPath, "executables");
    const fileList = this.plugin.settings.availableExecutables.map((exe) => `\u2022 ${path.basename(exe)}`).join("\n");
    this.relativeSetting.descEl.innerHTML = `
            Percorso scannerizzato: <code>${basePath}</code><br>
            File trovati: ${this.plugin.settings.availableExecutables.length}
            <pre style="margin-top:5px">${fileList || "Nessun file valido trovato"}</pre>
        `;
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtcclxuXHRBcHAsXHJcblx0UGx1Z2luLFxyXG5cdFBsdWdpblNldHRpbmdUYWIsXHJcblx0U2V0dGluZyxcclxuXHROb3RpY2UsXHJcblx0TWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCxcclxuXHRURmlsZSwgRHJvcGRvd25Db21wb25lbnRcclxuXHJcbn0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IGV4ZWMgfSBmcm9tIFwiY2hpbGRfcHJvY2Vzc1wiO1xyXG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tIFwidXRpbFwiO1xyXG5pbXBvcnQgeyBSYW5nZVNldEJ1aWxkZXIgfSBmcm9tIFwiQGNvZGVtaXJyb3Ivc3RhdGVcIjtcclxuaW1wb3J0IHtEZWNvcmF0aW9uLCBFZGl0b3JWaWV3LCBXaWRnZXRUeXBlfSBmcm9tIFwiQGNvZGVtaXJyb3Ivdmlld1wiO1xyXG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gXCJwYXRoXCI7XHJcbmltcG9ydCB7IHByb21pc2VzIGFzIGZzIH0gZnJvbSBcImZzXCI7XHJcbmltcG9ydCAqIGFzIG9zIGZyb20gXCJvc1wiO1xyXG5cclxuY29uc3QgZXhlY0FzeW5jID0gcHJvbWlzaWZ5KGV4ZWMpO1xyXG5cclxuaW50ZXJmYWNlIERsdlBsdWdpblNldHRpbmdzIHtcclxuXHRkbHZMb2NhdGlvblR5cGU6IFwiYWJzb2x1dGVcIiB8IFwicmVsYXRpdmVcIjtcclxuXHRhYnNvbHV0ZVBhdGg6IHN0cmluZztcclxuXHRyZWxhdGl2ZUV4ZWN1dGFibGU6IHN0cmluZztcclxuXHRhdmFpbGFibGVFeGVjdXRhYmxlczogc3RyaW5nW107XHJcblx0Y3VzdG9tRXh0ZW5zaW9uczogc3RyaW5nO1xyXG5cdHNob3dFcnJvcnM6IGJvb2xlYW47XHJcblx0c2hvd0FsbE1vZGVsczogYm9vbGVhbjtcclxuXHRoaWRlRmFjdHM6IGJvb2xlYW47XHJcblx0Y2FjaGVSZXN1bHRzOiBib29sZWFuO1xyXG59XHJcblxyXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBEbHZQbHVnaW5TZXR0aW5ncyA9IHtcclxuXHRkbHZMb2NhdGlvblR5cGU6IFwicmVsYXRpdmVcIixcclxuXHRhYnNvbHV0ZVBhdGg6IFwiXCIsXHJcblx0cmVsYXRpdmVFeGVjdXRhYmxlOiBcImV4ZWN1dGFibGVzL2Rsdi5leGVcIixcclxuXHRhdmFpbGFibGVFeGVjdXRhYmxlczogW10sXHJcblx0Y3VzdG9tRXh0ZW5zaW9uczogXCJhc3BcIixcclxuXHRzaG93RXJyb3JzOiBmYWxzZSxcclxuXHRzaG93QWxsTW9kZWxzOiBmYWxzZSxcclxuXHRoaWRlRmFjdHM6IGZhbHNlLFxyXG5cdGNhY2hlUmVzdWx0czogdHJ1ZSxcclxufTtcclxuXHJcbmNsYXNzIENvZGVCbG9ja1dpZGdldCBleHRlbmRzIFdpZGdldFR5cGUge1xyXG5cdGNvbnN0cnVjdG9yKFxyXG5cdFx0cHJpdmF0ZSBwbHVnaW46IERsdlBsdWdpbixcclxuXHRcdHByaXZhdGUgbGFuZzogc3RyaW5nLFxyXG5cdFx0cHJpdmF0ZSBzdGFydDogbnVtYmVyLFxyXG5cdFx0cHJpdmF0ZSBlbmQ6IG51bWJlcixcclxuXHRcdHByaXZhdGUgZG9jVGV4dDogc3RyaW5nXHJcblx0KSB7IHN1cGVyKCk7IH1cclxuXHJcblx0dG9ET00oKSB7XHJcblx0XHRjb25zdCB7IGhlYWRlciwgb3V0cHV0UHJlLCBjb3B5QnRuIH0gPSB0aGlzLnBsdWdpbi5jcmVhdGVDb2RlQmxvY2tVSSh0aGlzLmxhbmcpO1xyXG5cdFx0Y29uc3QgcnVuQnRuID0gaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5ydW4tYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblx0XHRjb25zdCBzYXZlQnRuID0gaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5zYXZlLWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuXHRcdHJ1bkJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRydW5CdG4uZGlzYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGNvbnN0IGNvZGVDb250ZW50ID0gdGhpcy5kb2NUZXh0LnNsaWNlKHRoaXMuc3RhcnQsIHRoaXMuZW5kKS50cmltKCk7XHJcblx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wbHVnaW4uZXhlY3V0ZURsdihjb2RlQ29udGVudCwgdGhpcy5sYW5nKTtcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi51cGRhdGVPdXRwdXRVSShvdXRwdXRQcmUsIGNvcHlCdG4sIHJlc3VsdCk7XHJcblx0XHRcdH0gZmluYWxseSB7XHJcblx0XHRcdFx0cnVuQnRuLmRpc2FibGVkID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0c2F2ZUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRzYXZlQnRuLmRpc2FibGVkID0gdHJ1ZTtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRjb25zdCBjb2RlQ29udGVudCA9IHRoaXMuZG9jVGV4dC5zbGljZSh0aGlzLnN0YXJ0LCB0aGlzLmVuZCkudHJpbSgpO1xyXG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucGx1Z2luLmV4ZWN1dGVEbHYoY29kZUNvbnRlbnQsIHRoaXMubGFuZyk7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZUV4ZWN1dGlvblJlc3VsdChyZXN1bHQpO1xyXG5cdFx0XHR9IGZpbmFsbHkge1xyXG5cdFx0XHRcdHNhdmVCdG4uZGlzYWJsZWQgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHRjb3B5QnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnBsdWdpbi5jb3B5VG9DbGlwYm9hcmQob3V0cHV0UHJlLnRleHRDb250ZW50IHx8IFwiXCIpO1xyXG5cclxuXHRcdGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblx0XHRjb250YWluZXIuY2xhc3NOYW1lID0gXCJkbHYtY29kZWJsb2NrXCI7XHJcblx0XHRjb250YWluZXIuYXBwZW5kKGhlYWRlciwgb3V0cHV0UHJlKTtcclxuXHRcdHJldHVybiBjb250YWluZXI7XHJcblx0fVxyXG5cclxuXHRlcShvdGhlcjogQ29kZUJsb2NrV2lkZ2V0KSB7XHJcblx0XHRyZXR1cm4gdGhpcy5zdGFydCA9PT0gb3RoZXIuc3RhcnQgJiYgdGhpcy5lbmQgPT09IG90aGVyLmVuZCAmJiB0aGlzLmxhbmcgPT09IG90aGVyLmxhbmc7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEbHZQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdHNldHRpbmdzOiBEbHZQbHVnaW5TZXR0aW5ncztcclxuXHRwcml2YXRlIHN0eWxlc0VsOiBIVE1MU3R5bGVFbGVtZW50O1xyXG5cdHBsdWdpblBhdGg6IHN0cmluZztcclxuXHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5pbml0aWFsaXplUGx1Z2luUGF0aCgpO1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHRcdHRoaXMuYWRkU3R5bGUoKTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFZGl0b3JFeHRlbnNpb24odGhpcy5nZXRFZGl0b3JEZWNvcmF0aW9uKCkpO1xyXG5cdFx0dGhpcy5yZWdpc3Rlck1hcmtkb3duUG9zdFByb2Nlc3Nvcih0aGlzLm1hcmtkb3duUG9zdFByb2Nlc3Nvci5iaW5kKHRoaXMpKTtcclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgRGx2U2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cdFx0dGhpcy5yZWdpc3RlckZpbGVIZWFkZXJCdXR0b25zKCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHJlZ2lzdGVyRmlsZUhlYWRlckJ1dHRvbnMoKSB7XHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKFwiZmlsZS1vcGVuXCIsIChmaWxlKSA9PiB7XHJcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgdGhpcy5pc1N1cHBvcnRlZEV4dGVuc2lvbihmaWxlLmV4dGVuc2lvbikpIHtcclxuXHRcdFx0XHR0aGlzLmFkZFJ1bkJ1dHRvblRvSGVhZGVyKGZpbGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9KSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFkZFN0eWxlKCkge1xyXG5cdFx0dGhpcy5zdHlsZXNFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XHJcblx0XHR0aGlzLnN0eWxlc0VsLnRleHRDb250ZW50ID0gYFxyXG4gICAgICAgICAgICAuZGx2LWNvZGVibG9jayB7XHJcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XHJcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICAgICAgICAgICAgICBtYXJnaW46IDFyZW0gMDtcclxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAuZGx2LWhlYWRlciB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDAuNXJlbTtcclxuICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDAuNXJlbTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAuZGx2LW91dHB1dCB7XHJcbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XHJcbiAgICAgICAgICAgICAgICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC41cmVtO1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcclxuICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAuZGx2LWVycm9yIHtcclxuXHRcdFx0XHRiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XHJcblx0XHRcdFx0cGFkZGluZzogMC41cmVtO1xyXG5cdFx0XHRcdGJvcmRlci1yYWRpdXM6IDRweDtcclxuXHRcdFx0XHRtYXJnaW4tdG9wOiAwLjVyZW07XHJcblx0XHRcdFx0Ym9yZGVyLWxlZnQ6IDNweCBzb2xpZCAjZmY1NTU1O1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQuZXJyb3ItaWNvbiB7XHJcblx0XHRcdFx0bWFyZ2luLXJpZ2h0OiAwLjVyZW07XHJcblx0XHRcdFx0Y29sb3I6ICNmZjU1NTU7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC5lcnJvci1jb250ZW50IHtcclxuXHRcdFx0XHRkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcblx0XHRcdFx0dmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0LmVycm9yLWxpbmUge1xyXG5cdFx0XHRcdG1hcmdpbjogMC4yNXJlbSAwO1xyXG5cdFx0XHRcdGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LW1vbm9zcGFjZSk7XHJcblx0XHRcdFx0Zm9udC1zaXplOiAwLjllbTtcclxuXHRcdFx0fVxyXG4gICAgICAgICAgICAuZGx2LWJ1dHRvbnMge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgICAgIGdhcDogMC41cmVtO1xyXG4gICAgICAgICAgICB9XHJcblx0XHRcdC5kbHYtcnVuLWNvbnRhaW5lciB7XHJcblx0XHRcdFx0Z2FwOiA0cHg7XHJcblx0XHRcdFx0bWFyZ2luLXJpZ2h0OiAxMnB4O1xyXG5cdFx0XHR9XHJcblx0XHRcdC5kbHYtcnVuLWJ1dHRvbiB7XHJcblx0XHRcdFx0Y29sb3I6IHZhcigtLXRleHQtbm9ybWFsKSAhaW1wb3J0YW50O1xyXG5cdFx0XHRcdHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4xNXMgZWFzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHQuZGx2LXJ1bi1idXR0b246aG92ZXIge1xyXG5cdFx0XHRcdGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpICFpbXBvcnRhbnQ7XHJcblx0XHRcdH1cclxuXHRcdFx0LmRsdi1ydW4tYnV0dG9uIHN2ZyB7XHJcblx0XHRcdFx0ZmxleC1zaHJpbms6IDA7XHJcblx0XHRcdH1cclxuXHRcdFx0LmRsdi1idXR0b24tdGV4dCB7XHJcblx0XHRcdFx0Zm9udC1zaXplOiAwLjg1ZW07XHJcblx0XHRcdFx0cG9zaXRpb246IHJlbGF0aXZlO1xyXG5cdFx0XHRcdGJvdHRvbTogMC4wNzZyZW07XHJcblx0XHRcdH1cclxuXHRcdFx0QG1lZGlhIChtYXgtd2lkdGg6IDQwMHB4KSB7XHJcblx0XHRcdFx0LmRsdi1idXR0b24tdGV4dCB7XHJcblx0XHRcdFx0XHRkaXNwbGF5OiBub25lO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHQuZGx2LXRvb2x0aXAge1xyXG5cdFx0XHRcdGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcclxuXHRcdFx0XHRmb250LXNpemU6IDAuODVlbTtcclxuXHRcdFx0fVxyXG4gICAgICAgIGA7XHJcblx0XHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHRoaXMuc3R5bGVzRWwpO1xyXG5cdH1cclxuXHJcblx0Y3JlYXRlQ29kZUJsb2NrVUkobGFuZzogc3RyaW5nKSB7XHJcblx0XHRjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0aGVhZGVyLmNsYXNzTmFtZSA9IFwiZGx2LWhlYWRlclwiO1xyXG5cclxuXHRcdGNvbnN0IGxhbmdMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG5cdFx0bGFuZ0xhYmVsLnRleHRDb250ZW50ID0gbGFuZy50b1VwcGVyQ2FzZSgpO1xyXG5cclxuXHRcdGNvbnN0IGJ1dHRvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0YnV0dG9ucy5jbGFzc05hbWUgPSBcImRsdi1idXR0b25zXCI7XHJcblxyXG5cdFx0Y29uc3QgcnVuQnRuID0gdGhpcy5jcmVhdGVCdXR0b24oXCJcdTI1QjYgUnVuXCIsIFwicnVuLWJ0blwiKTtcclxuXHRcdGNvbnN0IHNhdmVCdG4gPSB0aGlzLmNyZWF0ZUJ1dHRvbihcIlx1RDgzRFx1RENCRSBTYXZlXCIsIFwic2F2ZS1idG5cIik7XHJcblx0XHRjb25zdCBjb3B5QnRuID0gdGhpcy5jcmVhdGVCdXR0b24oXCJcdUQ4M0RcdURDQ0IgQ29weVwiLCBcImNvcHktYnRuXCIpO1xyXG5cclxuXHRcdGJ1dHRvbnMuYXBwZW5kKHJ1bkJ0biwgc2F2ZUJ0bik7XHJcblx0XHRoZWFkZXIuYXBwZW5kKGxhbmdMYWJlbCwgYnV0dG9ucyk7XHJcblxyXG5cdFx0Y29uc3Qgb3V0cHV0UHJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInByZVwiKTtcclxuXHRcdG91dHB1dFByZS5jbGFzc05hbWUgPSBcImRsdi1vdXRwdXRcIjtcclxuXHRcdG91dHB1dFByZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcblxyXG5cdFx0cmV0dXJuIHsgaGVhZGVyLCBvdXRwdXRQcmUsIGNvcHlCdG4gfTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgY3JlYXRlQnV0dG9uKHRleHQ6IHN0cmluZywgY2xhc3NOYW1lOiBzdHJpbmcpIHtcclxuXHRcdGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcblx0XHRidG4uY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG5cdFx0YnRuLnRleHRDb250ZW50ID0gdGV4dDtcclxuXHRcdHJldHVybiBidG47XHJcblx0fVxyXG5cclxuXHRhc3luYyBleGVjdXRlRGx2KGNvbnRlbnQ6IHN0cmluZywgbGFuZzogc3RyaW5nKTogUHJvbWlzZTx7IHN0ZG91dDogc3RyaW5nOyBzdGRlcnI6IHN0cmluZyB9PiB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyAxLiBWZXJpZmljYSBlc2lzdGVuemEgZmlsZSBETFZcclxuXHRcdFx0Y29uc3QgZGx2UGF0aCA9IHRoaXMuZ2V0RGx2UGF0aCgpO1xyXG5cdFx0XHRhd2FpdCBmcy5hY2Nlc3MoZGx2UGF0aCk7IC8vIExhbmNpYSBlcnJvcmUgc2Ugbm9uIGVzaXN0ZVxyXG5cclxuXHRcdFx0Ly8gMi4gQ3JlYSBmaWxlIHRlbXBvcmFuZW9cclxuXHRcdFx0Y29uc3QgdG1wRGlyID0gb3MudG1wZGlyKCk7XHJcblx0XHRcdGF3YWl0IGZzLm1rZGlyKHRtcERpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7IC8vIENyZWEgbGEgY2FydGVsbGEgc2Ugbm9uIGVzaXN0ZVxyXG5cclxuXHRcdFx0Y29uc3QgdG1wRmlsZSA9IHBhdGguam9pbih0bXBEaXIsIGBkbHYtdGVtcC0ke0RhdGUubm93KCl9LiR7bGFuZ31gKTtcclxuXHRcdFx0YXdhaXQgZnMud3JpdGVGaWxlKHRtcEZpbGUsIGNvbnRlbnQsIFwidXRmOFwiKTsgLy8gU2NyaXZlIGlsIGNvZGljZSBpbiB1biBmaWxlIHRlbXBvcmFuZW9cclxuXHJcblx0XHRcdC8vIDMuIEVzZWd1aSBETFZcclxuXHRcdFx0Y29uc3QgYXJncyA9IFt0bXBGaWxlXTtcclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2hvd0FsbE1vZGVscykgYXJncy5wdXNoKFwiLW5cIiwgXCIwXCIpO1xyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5oaWRlRmFjdHMpIGFyZ3MucHVzaChcIi0tbm8tZmFjdHNcIik7XHJcblxyXG5cdFx0XHRjb25zdCB7IHN0ZG91dCwgc3RkZXJyIH0gPSBhd2FpdCBleGVjQXN5bmMoXHJcblx0XHRcdFx0YFwiJHtkbHZQYXRofVwiICR7YXJncy5tYXAoYXJnID0+IGBcIiR7YXJnfVwiYCkuam9pbihcIiBcIil9YCxcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRzaGVsbDogcHJvY2Vzcy5wbGF0Zm9ybSA9PT0gXCJ3aW4zMlwiID8gXCJjbWQuZXhlXCIgOiB1bmRlZmluZWQsXHJcblx0XHRcdFx0XHR3aW5kb3dzSGlkZTogdHJ1ZSxcclxuXHRcdFx0XHRcdGVuY29kaW5nOiAndXRmLTgnXHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdFx0Ly8gNC4gUHVsaXppYSBmaWxlIHRlbXBvcmFuZW9cclxuXHRcdFx0YXdhaXQgZnMudW5saW5rKHRtcEZpbGUpLmNhdGNoKCgpID0+IHt9KTsgLy8gRWxpbWluYSBpbCBmaWxlIHRlbXBvcmFuZW9cclxuXHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0c3Rkb3V0OiB0aGlzLmNsZWFuT3V0cHV0KHN0ZG91dCksXHJcblx0XHRcdFx0c3RkZXJyOiB0aGlzLmNsZWFuRXJyb3JzKHN0ZGVycilcclxuXHRcdFx0fTtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdC8vIEdlc3Rpb25lIGVycm9yaSBjZW50cmFsaXp6YXRhXHJcblx0XHRcdGxldCBlcnJvck1lc3NhZ2UgPSBcIkVycm9yZSBzY29ub3NjaXV0b1wiO1xyXG5cdFx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xyXG5cdFx0XHRcdGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yZSBleGVjdXRlRGx2OlwiLCBlcnJvcik7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0c3Rkb3V0OiBcIlwiLFxyXG5cdFx0XHRcdHN0ZGVycjogZXJyb3JNZXNzYWdlXHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGNsZWFuT3V0cHV0KG91dHB1dDogc3RyaW5nKSB7XHJcblx0XHRyZXR1cm4gb3V0cHV0XHJcblx0XHRcdC5yZXBsYWNlKC9eRExWIFxcZCtcXC5cXGQrXFwuXFxkK1xccypcXG4vLCBcIlwiKSAvLyBSaW11b3ZlIGxhIHJpZ2EgZGVsbGEgdmVyc2lvbmVcclxuXHRcdFx0LnJlcGxhY2UoL0dlbmVyaWMgd2FybmluZzogLipcXG4/L2csIFwiXCIpICAvLyBSaW11b3ZlIGkgd2FybmluZyBnZW5lcmljaVxyXG5cdFx0XHQudHJpbSgpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBjbGVhbkVycm9ycyhlcnJvck91dHB1dDogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdC8vIFNwbGl0IGluIGxpbmVlIGUgZmlsdHJhXHJcblx0XHRjb25zdCBsaW5lcyA9IGVycm9yT3V0cHV0LnNwbGl0KCdcXG4nKVxyXG5cdFx0XHQubWFwKGxpbmUgPT4ge1xyXG5cdFx0XHRcdC8vIDEuIFJpbXVvdmkgaW50ZXJpIHBlcmNvcnNpIGZpbGVcclxuXHRcdFx0XHRsaW5lID0gbGluZS5yZXBsYWNlKC8oW0EtWmEtel06XFxcXFteXFxzXSt8XFwvW15cXHNdKykvZywgJycpXHJcblx0XHRcdFx0XHQucmVwbGFjZSgvKGRsdi10ZW1wLVxcZCtcXC5hc3ApL2dpLCAnSW5wdXQnKTtcclxuXHJcblx0XHRcdFx0Ly8gMi4gRXN0cmFpIHNvbG8gbGEgcGFydGUgZG9wbyBcImxpbmUgWDpcIlxyXG5cdFx0XHRcdGNvbnN0IGVycm9yTWF0Y2ggPSBsaW5lLm1hdGNoKC8obGluZSBcXGQrKTpcXHMqKC4qKS9pKTtcclxuXHRcdFx0XHRpZiAoZXJyb3JNYXRjaCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGAke2Vycm9yTWF0Y2hbMV19OiAke2Vycm9yTWF0Y2hbMl0ucmVwbGFjZSgvXi4qPzpcXHMqLywgJycpfWA7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyAzLiBSaW11b3ZpIHJpZ2hlIG5vbiByaWxldmFudGlcclxuXHRcdFx0XHRyZXR1cm4gbGluZS5pbmNsdWRlcygnQ29tbWFuZCBmYWlsZWQ6JykgfHxcclxuXHRcdFx0XHRsaW5lLmluY2x1ZGVzKCdBYm9ydGluZyBkdWUgdG8nKSA/ICcnIDogbGluZTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmZpbHRlcihsaW5lID0+IGxpbmUudHJpbSgpLmxlbmd0aCA+IDApO1xyXG5cclxuXHRcdC8vIDQuIFVuaXNjaSBlIGZvcm1hdHRhXHJcblx0XHRyZXR1cm4gbGluZXMuam9pbignXFxuJylcclxuXHRcdFx0LnJlcGxhY2UoLyhsaW5lIFxcZCspOi9naSwgJ0Vycm9yZTpcXG4kMScpXHJcblx0XHRcdC5yZXBsYWNlKC9bLjpdKyQvLCAnJykgLy8gUmltdW92aSBwdW50aSBmaW5hbGlcclxuXHRcdFx0LnRyaW0oKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZm9ybWF0RXJyb3JNZXNzYWdlcyhlcnJvclN0cmluZzogc3RyaW5nKSB7XHJcblx0XHRyZXR1cm4gZXJyb3JTdHJpbmdcclxuXHRcdFx0LnNwbGl0KCdcXG4nKVxyXG5cdFx0XHQubWFwKGxpbmUgPT4ge1xyXG5cdFx0XHRcdC8vIEVzdHJhaSBudW1lcm8gbGluZWEgZSBtZXNzYWdnaW9cclxuXHRcdFx0XHRjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2goL0xpbmVhIChcXGQrKTpcXHMqKC4qKS9pKTtcclxuXHRcdFx0XHRpZiAobWF0Y2gpIHtcclxuXHRcdFx0XHRcdHJldHVybiBgPGRpdiBjbGFzcz1cImVycm9yLWxpbmVcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImVycm9yLWxpbmUtbnVtYmVyXCI+TGluZWEgJHttYXRjaFsxXX06PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZXJyb3ItbWVzc2FnZVwiPiR7bWF0Y2hbMl19PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+YDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIGxpbmUgPyBgPGRpdiBjbGFzcz1cImVycm9yLWdlbmVyYWxcIj4ke2xpbmV9PC9kaXY+YCA6ICcnO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuam9pbignJyk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGVPdXRwdXRVSShvdXRwdXRFbDogSFRNTEVsZW1lbnQsIGNvcHlCdG46IEhUTUxCdXR0b25FbGVtZW50LCByZXN1bHQ6IHsgc3Rkb3V0OiBzdHJpbmc7IHN0ZGVycjogc3RyaW5nIH0pIHtcclxuXHRcdG91dHB1dEVsLmlubmVySFRNTCA9IHJlc3VsdC5zdGRvdXQucmVwbGFjZSgvXFxuL2csIFwiPGJyPlwiKTtcclxuXHRcdG91dHB1dEVsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcblxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2hvd0Vycm9ycyAmJiByZXN1bHQuc3RkZXJyKSB7XHJcblx0XHRcdGNvbnN0IGVycm9yQ29udGVudCA9IHRoaXMuY2xlYW5FcnJvcnMocmVzdWx0LnN0ZGVycilcclxuXHRcdFx0XHQuc3BsaXQoJ1xcbicpXHJcblx0XHRcdFx0Lm1hcChsaW5lID0+IGA8ZGl2IGNsYXNzPVwiZXJyb3ItbGluZVwiPjxiPiR7bGluZS5zcGxpdCgnOicpWzBdfTo8L2I+ICR7bGluZS5zcGxpdCgnOicpLnNsaWNlKDEpLmpvaW4oJzonKX08L2Rpdj5gKVxyXG5cdFx0XHRcdC5qb2luKCcnKTtcclxuXHJcblx0XHRcdGNvbnN0IGVycm9yRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0XHRlcnJvckVsLmNsYXNzTmFtZSA9IFwiZGx2LWVycm9yXCI7XHJcblx0XHRcdGVycm9yRWwuaW5uZXJIVE1MID0gYDxwcmU+JHtlcnJvckNvbnRlbnR9PC9wcmU+YDtcclxuXHRcdFx0b3V0cHV0RWwuYXBwZW5kQ2hpbGQoZXJyb3JFbCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29weUJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZUV4ZWN1dGlvblJlc3VsdChyZXN1bHQ6IHsgc3Rkb3V0OiBzdHJpbmc7IHN0ZGVycjogc3RyaW5nIH0pIHtcclxuXHRcdGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKTtcclxuXHRcdGxldCBjb250ZW50ID0gYCUgJHt0aW1lc3RhbXB9XFxuYDtcclxuXHJcblx0XHRpZiAocmVzdWx0LnN0ZG91dCkge1xyXG5cdFx0XHRjb250ZW50ICs9IFwiJSBBbnN3ZXJTZXRcXG5cIiArXHJcblx0XHRcdFx0cmVzdWx0LnN0ZG91dC5zcGxpdCgnXFxuJylcclxuXHRcdFx0XHRcdC5tYXAobGluZSA9PiBgJSAke2xpbmV9YClcclxuXHRcdFx0XHRcdC5qb2luKCdcXG4nKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5zaG93RXJyb3JzICYmIHJlc3VsdC5zdGRlcnIpIHtcclxuXHRcdFx0Y29udGVudCArPSBcIlxcbiUgRXJyb3JlXFxuXCIgK1xyXG5cdFx0XHRcdHJlc3VsdC5zdGRlcnIuc3BsaXQoJ1xcbicpXHJcblx0XHRcdFx0XHQubWFwKGxpbmUgPT4gYCUgJHtsaW5lfWApXHJcblx0XHRcdFx0XHQuam9pbignXFxuJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRpZiAoZmlsZSkge1xyXG5cdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5hcHBlbmQoZmlsZSwgYFxcblxcbiR7Y29udGVudC50cmltKCl9YCk7XHJcblx0XHRcdG5ldyBOb3RpY2UoXCJSaXN1bHRhdG8gc2FsdmF0byBuZWwgZmlsZSFcIik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRjb3B5VG9DbGlwYm9hcmQodGV4dDogc3RyaW5nKSB7XHJcblx0XHRuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0ZXh0KS50aGVuKCgpID0+IG5ldyBOb3RpY2UoXCJDb3BpZWQgdG8gY2xpcGJvYXJkXCIpKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYWRkUnVuQnV0dG9uVG9IZWFkZXIoZmlsZTogVEZpbGUpIHtcclxuXHRcdGNvbnN0IHRpdGxlQmFyID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoKS52aWV3LmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoXCIudmlldy1oZWFkZXJcIik7XHJcblx0XHRpZiAoIXRpdGxlQmFyKSByZXR1cm47XHJcblxyXG5cdFx0Ly8gUmltdW92aSBldmVudHVhbGkgcHVsc2FudGkgcHJlY2VkZW50aVxyXG5cdFx0Y29uc3QgYWN0aW9uc0NvbnRhaW5lciA9IHRpdGxlQmFyLnF1ZXJ5U2VsZWN0b3IoXCIudmlldy1hY3Rpb25zXCIpIHx8IHRpdGxlQmFyLnF1ZXJ5U2VsZWN0b3IoXCIudGl0bGViYXItYnV0dG9uLWNvbnRhaW5lclwiKTtcclxuXHRcdGlmICghYWN0aW9uc0NvbnRhaW5lcikgcmV0dXJuO1xyXG5cclxuXHRcdC8vIFJpbXVvdmkgZXZlbnR1YWxpIHB1bHNhbnRpIHByZWNlZGVudGlcclxuXHRcdGFjdGlvbnNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmRsdi1ydW4tYnV0dG9uJykuZm9yRWFjaChidG4gPT4gYnRuLnJlbW92ZSgpKTtcclxuXHJcblx0XHQvLyBDcmVhIGlsIHB1bHNhbnRlXHJcblx0XHRjb25zdCBydW5CdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0cnVuQnRuLmNsYXNzTmFtZSA9IFwiY2xpY2thYmxlLWljb24gZGx2LXJ1bi1idXR0b25cIjtcclxuXHRcdHJ1bkJ0bi5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxOFwiIGhlaWdodD1cIjE4XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgXHJcbiAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+XHJcbiAgICAgICAgICAgIDxwb2x5Z29uIHBvaW50cz1cIjUgMyAxOSAxMiA1IDIxIDUgM1wiLz5cclxuICAgICAgICA8L3N2Zz5cclxuICAgICAgICA8c3BhbiBjbGFzcz1cImRsdi1idXR0b24tdGV4dFwiPlJ1bjwvc3Bhbj5cclxuICAgIGA7XHJcblxyXG5cdFx0Ly8gU3RpbGUgZGVsIHB1bHNhbnRlXHJcblx0XHRydW5CdG4uc3R5bGUuY3NzVGV4dCA9IGBcclxuICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICAgICAgZ2FwOiA2cHg7XHJcbiAgICAgICAgcGFkZGluZzogNHB4IDhweDtcclxuICAgICAgICBtYXJnaW46IDAgMnB4O1xyXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICAgICAgdG9wOiAtMXB4O1xyXG4gICAgYDtcclxuXHJcblx0XHQvLyBBZ2dpdW5naSBob3ZlciBlZmZlY3RcclxuXHRcdHJ1bkJ0bi5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCAoKSA9PiB7XHJcblx0XHRcdHJ1bkJ0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpXCI7XHJcblx0XHR9KTtcclxuXHRcdHJ1bkJ0bi5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCAoKSA9PiB7XHJcblx0XHRcdHJ1bkJ0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInRyYW5zcGFyZW50XCI7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBFdmVudG8gY2xpY2tcclxuXHRcdHJ1bkJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZURsdihjb250ZW50LCBmaWxlLmV4dGVuc2lvbik7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlRXhlY3V0aW9uUmVzdWx0KHJlc3VsdCk7XHJcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdFx0bmV3IE5vdGljZShgRXJyb3JlOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJFcnJvcmUgc2Nvbm9zY2l1dG9cIn1gKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHRhY3Rpb25zQ29udGFpbmVyLmluc2VydEJlZm9yZShydW5CdG4sIGFjdGlvbnNDb250YWluZXIuZmlyc3RDaGlsZCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIG1hcmtkb3duUG9zdFByb2Nlc3NvcihlbGVtZW50OiBIVE1MRWxlbWVudCwgY3R4OiBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0KSB7XHJcblx0XHRlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJwcmUgY29kZVwiKS5mb3JFYWNoKChjb2RlRWwpID0+IHtcclxuXHRcdFx0Y29uc3QgZWwgPSBjb2RlRWwgYXMgSFRNTEVsZW1lbnQ7IC8vIDwtLSBBZ2dpdW5naSB0eXBlIGFzc2VydGlvblxyXG5cdFx0XHRjb25zdCBsYW5nID0gdGhpcy5nZXRDb2RlQmxvY2tMYW5ndWFnZShlbCk7XHJcblx0XHRcdGlmICghbGFuZyB8fCAhdGhpcy5pc1N1cHBvcnRlZExhbmd1YWdlKGxhbmcpKSByZXR1cm47XHJcblxyXG5cdFx0XHRjb25zdCB7IGhlYWRlciwgb3V0cHV0UHJlLCBjb3B5QnRuIH0gPSB0aGlzLmNyZWF0ZUNvZGVCbG9ja1VJKGxhbmcpO1xyXG5cdFx0XHRjb25zdCBydW5CdG4gPSBoZWFkZXIucXVlcnlTZWxlY3RvcignLnJ1bi1idG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHRcdFx0Y29uc3Qgc2F2ZUJ0biA9IGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuc2F2ZS1idG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHJcblx0XHRcdGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0XHR3cmFwcGVyLmNsYXNzTmFtZSA9IFwiZGx2LWNvZGVibG9ja1wiO1xyXG5cdFx0XHR3cmFwcGVyLmFwcGVuZChcclxuXHRcdFx0XHRoZWFkZXIsXHJcblx0XHRcdFx0ZWwucGFyZW50RWxlbWVudCEuY2xvbmVOb2RlKHRydWUpLFxyXG5cdFx0XHRcdG91dHB1dFByZVxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdFx0Ly8gQWdnaXVuZ2kgZ2VzdGlvbmUgZXZlbnRpXHJcblx0XHRcdHJ1bkJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZURsdihlbC50ZXh0Q29udGVudCB8fCBcIlwiLCBsYW5nKTtcclxuXHRcdFx0XHR0aGlzLnVwZGF0ZU91dHB1dFVJKG91dHB1dFByZSwgY29weUJ0biwgcmVzdWx0KTtcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHNhdmVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVEbHYoZWwudGV4dENvbnRlbnQgfHwgXCJcIiwgbGFuZyk7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlRXhlY3V0aW9uUmVzdWx0KHJlc3VsdCk7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRjb3B5QnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNvcHlUb0NsaXBib2FyZChvdXRwdXRQcmUudGV4dENvbnRlbnQgfHwgXCJcIik7XHJcblxyXG5cdFx0XHRlbC5wYXJlbnRFbGVtZW50Py5yZXBsYWNlV2l0aCh3cmFwcGVyKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBnZXRDb2RlQmxvY2tMYW5ndWFnZShlbGVtZW50OiBIVE1MRWxlbWVudCkge1xyXG5cdFx0Y29uc3QgbGFuZ0NsYXNzID0gQXJyYXkuZnJvbShlbGVtZW50LmNsYXNzTGlzdCkuZmluZChjID0+IGMuc3RhcnRzV2l0aChcImxhbmd1YWdlLVwiKSk7XHJcblx0XHRyZXR1cm4gbGFuZ0NsYXNzPy5yZXBsYWNlKFwibGFuZ3VhZ2UtXCIsIFwiXCIpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBpc1N1cHBvcnRlZExhbmd1YWdlKGxhbmc6IHN0cmluZykge1xyXG5cdFx0cmV0dXJuIHRoaXMuc2V0dGluZ3MuY3VzdG9tRXh0ZW5zaW9uc1xyXG5cdFx0XHQuc3BsaXQoXCIsXCIpXHJcblx0XHRcdC5tYXAoZSA9PiBlLnRyaW0oKS50b0xvd2VyQ2FzZSgpKVxyXG5cdFx0XHQuc29tZShlID0+IGxhbmcudG9Mb3dlckNhc2UoKSA9PT0gZSB8fCBsYW5nLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChlICsgXCIuXCIpKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgaXNTdXBwb3J0ZWRFeHRlbnNpb24oZXh0OiBzdHJpbmcpIHtcclxuXHRcdHJldHVybiB0aGlzLmlzU3VwcG9ydGVkTGFuZ3VhZ2UoZXh0KTtcclxuXHR9XHJcblxyXG5cdGdldEVkaXRvckRlY29yYXRpb24oKSB7XHJcblx0XHRyZXR1cm4gRWRpdG9yVmlldy5kZWNvcmF0aW9ucy5jb21wdXRlKFtcImRvY1wiXSwgc3RhdGUgPT4ge1xyXG5cdFx0XHRjb25zdCBidWlsZGVyID0gbmV3IFJhbmdlU2V0QnVpbGRlcjxEZWNvcmF0aW9uPigpO1xyXG5cdFx0XHRjb25zdCB0ZXh0ID0gc3RhdGUuZG9jLnRvU3RyaW5nKCk7XHJcblx0XHRcdGNvbnN0IHJlZ2V4ID0gL2BgYChcXFMrKVxcbihbXFxzXFxTXSo/KWBgYC9nO1xyXG5cclxuXHRcdFx0bGV0IG1hdGNoO1xyXG5cdFx0XHR3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyh0ZXh0KSkgIT09IG51bGwpIHtcclxuXHRcdFx0XHRjb25zdCBsYW5nID0gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0XHRpZiAodGhpcy5pc1N1cHBvcnRlZExhbmd1YWdlKGxhbmcpKSB7XHJcblx0XHRcdFx0XHRjb25zdCBzdGFydCA9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0uaW5kZXhPZihtYXRjaFsyXSk7XHJcblx0XHRcdFx0XHRjb25zdCBlbmQgPSBzdGFydCArIG1hdGNoWzJdLmxlbmd0aDtcclxuXHRcdFx0XHRcdGJ1aWxkZXIuYWRkKGVuZCwgZW5kLCBEZWNvcmF0aW9uLndpZGdldCh7XHJcblx0XHRcdFx0XHRcdHdpZGdldDogbmV3IENvZGVCbG9ja1dpZGdldCh0aGlzLCBsYW5nLCBzdGFydCwgZW5kLCB0ZXh0KSxcclxuXHRcdFx0XHRcdFx0c2lkZTogMVxyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gYnVpbGRlci5maW5pc2goKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhc3luYyBpbml0aWFsaXplUGx1Z2luUGF0aCgpIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdC8vIE90dGllbmkgaWwgcGVyY29yc28gYmFzZSBjb3JyZXR0byBkZWxsYSB2YXVsdFxyXG5cdFx0XHRjb25zdCB2YXVsdFBhdGggPSAodGhpcy5hcHAudmF1bHQuYWRhcHRlciBhcyBhbnkpLmJhc2VQYXRoOyAvLyA8LS0gTW9kaWZpY2EgcXVpXHJcblxyXG5cdFx0XHQvLyBDb3N0cnVpc2NpIGlsIHBlcmNvcnNvIGRlbCBwbHVnaW4gY29ycmV0dGFtZW50ZVxyXG5cdFx0XHRpZiAodGhpcy5tYW5pZmVzdC5kaXIgIT0gbnVsbCkge1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luUGF0aCA9IHBhdGguam9pbihcclxuXHRcdFx0XHRcdHZhdWx0UGF0aCxcclxuXHRcdFx0XHRcdHRoaXMubWFuaWZlc3QuZGlyXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gRGVidWdcclxuXHRcdFx0Y29uc29sZS5sb2coXCJQZXJjb3JzbyBjb3JyZXR0byBkZWwgcGx1Z2luOlwiLCB0aGlzLnBsdWdpblBhdGgpO1xyXG5cclxuXHRcdFx0YXdhaXQgZnMubWtkaXIodGhpcy5wbHVnaW5QYXRoLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcclxuXHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRXJyb3JlIGluaXppYWxpenphemlvbmUgcGx1Z2luOlwiLCBlcnJvcik7XHJcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIkNvbmZpZ3VyYXppb25lIHBsdWdpbiBub24gdmFsaWRhXCIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgcmVmcmVzaEV4ZWN1dGFibGVzTGlzdCgpIHtcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmRsdkxvY2F0aW9uVHlwZSA9PT0gXCJyZWxhdGl2ZVwiKSB7XHJcblx0XHRcdC8vIDUuIFBlcmNvcnNvIGVzZWd1aWJpbGkgY29ycmV0dG9cclxuXHRcdFx0Y29uc3QgZXhlY3V0YWJsZXNQYXRoID0gcGF0aC5qb2luKHRoaXMucGx1Z2luUGF0aCwgXCJleGVjdXRhYmxlc1wiKTtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJQZXJjb3JzbyBlc2VndWliaWxpOlwiLCBleGVjdXRhYmxlc1BhdGgpO1xyXG5cclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRjb25zdCBmaWxlcyA9IGF3YWl0IGZzLnJlYWRkaXIoZXhlY3V0YWJsZXNQYXRoKTtcclxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmF2YWlsYWJsZUV4ZWN1dGFibGVzID0gZmlsZXNcclxuXHRcdFx0XHRcdC5maWx0ZXIoZiA9PiBmLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2RsdicpKVxyXG5cdFx0XHRcdFx0Lm1hcChmID0+IHBhdGguam9pbignZXhlY3V0YWJsZXMnLCBmKSk7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiRXNlZ3VpYmlsaSB0cm92YXRpOlwiLCB0aGlzLnNldHRpbmdzLmF2YWlsYWJsZUV4ZWN1dGFibGVzKTtcclxuXHJcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yZSBzY2Fuc2lvbmUgZXNlZ3VpYmlsaTpcIiwgZXJyb3IpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGlzVmFsaWRFeGVjdXRhYmxlKGZpbGVuYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcclxuXHRcdC8vIFZlcmlmaWNhIHBlciBXaW5kb3dzXHJcblx0XHRpZiAocHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ3dpbjMyJykge1xyXG5cdFx0XHRyZXR1cm4gZmlsZW5hbWUudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLmV4ZScpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFZlcmlmaWNhIHBlciBMaW51eC9NYWMgKGNvbnRyb2xsbyBwYXR0ZXJuIG5vbWUpXHJcblx0XHRyZXR1cm4gL15kbHZbLV9dPyhsaW51eHxtYWN8LiopL2kudGVzdChmaWxlbmFtZSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGdldERsdlBhdGgoKSB7XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5kbHZMb2NhdGlvblR5cGUgPT09IFwiYWJzb2x1dGVcIikge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5zZXR0aW5ncy5hYnNvbHV0ZVBhdGg7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gNC4gQ29zdHJ1emlvbmUgcGVyY29yc28gcmVsYXRpdm8gY29ycmV0dGFcclxuXHRcdHJldHVybiBwYXRoLmpvaW4oXHJcblx0XHRcdHRoaXMucGx1Z2luUGF0aCxcclxuXHRcdFx0dGhpcy5zZXR0aW5ncy5yZWxhdGl2ZUV4ZWN1dGFibGVcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuXHRcdGF3YWl0IHRoaXMucmVmcmVzaEV4ZWN1dGFibGVzTGlzdCgpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0Ly8gVmFsaWRhemlvbmUgcmluZm9yemF0YVxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuZGx2TG9jYXRpb25UeXBlID09PSAncmVsYXRpdmUnKSB7XHJcblx0XHRcdGNvbnN0IGZ1bGxQYXRoID0gcGF0aC5qb2luKHRoaXMucGx1Z2luUGF0aCwgdGhpcy5zZXR0aW5ncy5yZWxhdGl2ZUV4ZWN1dGFibGUpO1xyXG5cclxuXHRcdFx0aWYgKCFhd2FpdCBmcy5hY2Nlc3MoZnVsbFBhdGgpLnRoZW4oKCkgPT4gdHJ1ZSkuY2F0Y2goKCkgPT4gZmFsc2UpKSB7XHJcblx0XHRcdFx0bmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIEVzZWd1aWJpbGUgbm9uIHRyb3ZhdG8gbmVsIHBlcmNvcnNvIHJlbGF0aXZvIScpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aWYgKCFhd2FpdCBmcy5hY2Nlc3ModGhpcy5zZXR0aW5ncy5hYnNvbHV0ZVBhdGgpLnRoZW4oKCkgPT4gdHJ1ZSkuY2F0Y2goKCkgPT4gZmFsc2UpKSB7XHJcblx0XHRcdFx0bmV3IE5vdGljZSgnXHUyNkEwXHVGRTBGIFBlcmNvcnNvIGFzc29sdXRvIG5vbiB2YWxpZG8hJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHR9XHJcblxyXG5cdG9udW5sb2FkKCkge1xyXG5cdFx0dGhpcy5zdHlsZXNFbD8ucmVtb3ZlKCk7XHJcblx0fVxyXG59XHJcblxyXG5jbGFzcyBEbHZTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblx0cGx1Z2luOiBEbHZQbHVnaW47XHJcblx0cHJpdmF0ZSB0eXBlRHJvcGRvd246IERyb3Bkb3duQ29tcG9uZW50O1xyXG5cdHByaXZhdGUgYWJzb2x1dGVTZXR0aW5nOiBTZXR0aW5nO1xyXG5cdHByaXZhdGUgcmVsYXRpdmVTZXR0aW5nOiBTZXR0aW5nO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBEbHZQbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnRExWIFBsdWdpbiBTZXR0aW5ncycgfSk7XHJcblxyXG5cdFx0Ly8gVGlwbyBkaSBpbnN0YWxsYXppb25lXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ0luc3RhbGxhdGlvbiBUeXBlJylcclxuXHRcdFx0LnNldERlc2MoJ1NlbGVjdCBETFYgZXhlY3V0YWJsZSBsb2NhdGlvbiB0eXBlJylcclxuXHRcdFx0LmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuXHRcdFx0XHR0aGlzLnR5cGVEcm9wZG93biA9IGRyb3Bkb3duXHJcblx0XHRcdFx0XHQuYWRkT3B0aW9uKCdhYnNvbHV0ZScsICdBYnNvbHV0ZSBQYXRoJylcclxuXHRcdFx0XHRcdC5hZGRPcHRpb24oJ3JlbGF0aXZlJywgJ1JlbGF0aXZlIHRvIFBsdWdpbicpXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGx2TG9jYXRpb25UeXBlKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kbHZMb2NhdGlvblR5cGUgPSB2YWx1ZSBhcyBcImFic29sdXRlXCIgfCBcInJlbGF0aXZlXCI7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnJlZnJlc2hFeGVjdXRhYmxlc0xpc3QoKTtcclxuXHRcdFx0XHRcdFx0dGhpcy51cGRhdGVTZXR0aW5nc1Zpc2liaWxpdHkoKTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0Ly8gUGVyY29yc28gYXNzb2x1dG9cclxuXHRcdHRoaXMuYWJzb2x1dGVTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdBYnNvbHV0ZSBQYXRoJylcclxuXHRcdFx0LnNldERlc2MoJ0Z1bGwgcGF0aCB0byBETFYgZXhlY3V0YWJsZSAoZS5nLiBDOi9kbHYvZGx2LmV4ZSknKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYWJzb2x1dGVQYXRoKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmFic29sdXRlUGF0aCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdC8vIFBlcmNvcnNvIHJlbGF0aXZvXHJcblx0XHR0aGlzLnJlbGF0aXZlU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnUGx1Z2luIEV4ZWN1dGFibGUnKVxyXG5cdFx0XHQuc2V0RGVzYygnU2VsZWN0IGV4ZWN1dGFibGUgZnJvbSBwbHVnaW4gZm9sZGVyJylcclxuXHRcdFx0LmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdmFpbGFibGVFeGVjdXRhYmxlcy5mb3JFYWNoKGV4ZSA9PiB7XHJcblx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24oZXhlLCBleGUuc3BsaXQoJy8nKS5wb3AoKSB8fCBleGUpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGRyb3Bkb3duXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVsYXRpdmVFeGVjdXRhYmxlKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWxhdGl2ZUV4ZWN1dGFibGUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0Ly8gQWx0cmUgaW1wb3N0YXppb25pXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1N1cHBvcnRlZCBGaWxlIEV4dGVuc2lvbnMnKVxyXG5cdFx0XHQuc2V0RGVzYygnQ29tbWEtc2VwYXJhdGVkIGxpc3QgKGUuZy4gYXNwLGRsdixwcm9sb2cpJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUV4dGVuc2lvbnMpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tRXh0ZW5zaW9ucyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnU2hvdyBBbGwgTW9kZWxzJylcclxuXHRcdFx0LnNldERlc2MoJ0VuYWJsZSAtbiAwIGZsYWcgdG8gc2hvdyBhbGwgYW5zd2VyIHNldHMnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0FsbE1vZGVscylcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93QWxsTW9kZWxzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdIaWRlIEZhY3RzJylcclxuXHRcdFx0LnNldERlc2MoJ0VuYWJsZSAtLW5vLWZhY3RzIGZsYWcgdG8gaGlkZSBmYWN0cycpXHJcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWRlRmFjdHMpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUZhY3RzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdFcnJvciBIYW5kbGluZycpXHJcblx0XHRcdC5zZXREZXNjKCdTaG93IGVycm9yIG1lc3NhZ2VzIGluIG91dHB1dCcpXHJcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RXJyb3JzKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFcnJvcnMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHJcblx0XHR0aGlzLnVwZGF0ZVNldHRpbmdzVmlzaWJpbGl0eSgpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSB1cGRhdGVTZXR0aW5nc1Zpc2liaWxpdHkoKTogdm9pZCB7XHJcblx0XHRjb25zdCBpc0Fic29sdXRlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGx2TG9jYXRpb25UeXBlID09PSBcImFic29sdXRlXCI7XHJcblxyXG5cdFx0dGhpcy5hYnNvbHV0ZVNldHRpbmcuc2V0dGluZ0VsLnN0eWxlLmRpc3BsYXkgPSBpc0Fic29sdXRlID8gXCJcIiA6IFwibm9uZVwiO1xyXG5cdFx0dGhpcy5yZWxhdGl2ZVNldHRpbmcuc2V0dGluZ0VsLnN0eWxlLmRpc3BsYXkgPSBpc0Fic29sdXRlID8gXCJub25lXCIgOiBcIlwiO1xyXG5cclxuXHRcdC8vIEFnZ2lvcm5hIGxhIGxpc3RhIG5lbCBkcm9wZG93blxyXG5cdFx0Y29uc3QgZHJvcGRvd24gPSB0aGlzLnJlbGF0aXZlU2V0dGluZy5jb250cm9sRWwucXVlcnlTZWxlY3Rvcignc2VsZWN0Jyk7XHJcblx0XHRpZiAoZHJvcGRvd24pIHtcclxuXHRcdFx0ZHJvcGRvd24uaW5uZXJIVE1MID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXZhaWxhYmxlRXhlY3V0YWJsZXNcclxuXHRcdFx0XHQubWFwKGV4ZSA9PiBgPG9wdGlvbiB2YWx1ZT1cIiR7ZXhlfVwiPiR7cGF0aC5iYXNlbmFtZShleGUpfTwvb3B0aW9uPmApXHJcblx0XHRcdFx0LmpvaW4oJycpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIE1lc3NhZ2dpbyBkZXR0YWdsaWF0b1xyXG5cdFx0Y29uc3QgYmFzZVBhdGggPSBwYXRoLmpvaW4odGhpcy5wbHVnaW4ucGx1Z2luUGF0aCwgJ2V4ZWN1dGFibGVzJyk7XHJcblx0XHRjb25zdCBmaWxlTGlzdCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmF2YWlsYWJsZUV4ZWN1dGFibGVzXHJcblx0XHRcdC5tYXAoZXhlID0+IGBcdTIwMjIgJHtwYXRoLmJhc2VuYW1lKGV4ZSl9YClcclxuXHRcdFx0LmpvaW4oJ1xcbicpO1xyXG5cclxuXHRcdHRoaXMucmVsYXRpdmVTZXR0aW5nLmRlc2NFbC5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgIFBlcmNvcnNvIHNjYW5uZXJpenphdG86IDxjb2RlPiR7YmFzZVBhdGh9PC9jb2RlPjxicj5cclxuICAgICAgICAgICAgRmlsZSB0cm92YXRpOiAke3RoaXMucGx1Z2luLnNldHRpbmdzLmF2YWlsYWJsZUV4ZWN1dGFibGVzLmxlbmd0aH1cclxuICAgICAgICAgICAgPHByZSBzdHlsZT1cIm1hcmdpbi10b3A6NXB4XCI+JHtmaWxlTGlzdCB8fCAnTmVzc3VuIGZpbGUgdmFsaWRvIHRyb3ZhdG8nfTwvcHJlPlxyXG4gICAgICAgIGA7XHJcblx0fVxyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBU087QUFDUCwyQkFBcUI7QUFDckIsa0JBQTBCO0FBQzFCLG1CQUFnQztBQUNoQyxrQkFBaUQ7QUFDakQsV0FBc0I7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
